<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-11-22 Sun 09:47 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>README</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2020 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">README</h1>

<div class="figure">
<p><a href="https://travis-ci.org/kimim/kimim-emacs"><object type="image/svg+xml" data="https://travis-ci.org/kimim/kimim-emacs.svg" class="org-svg">
Sorry, your browser does not support SVG.</object></a>
</p>
</div>

<div id="outline-container-org3ecd6e6" class="outline-2">
<h2 id="org3ecd6e6"><span class="section-number-2">1</span> Introduction</h2>
<div class="outline-text-2" id="text-1">
<p>
This Emacs configuration file is written in literate programming method.<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup>
The elisp file is extracted from this file, and then compiled to binary <code>elc</code>
file for fast loading in the future.
</p>
</div>
</div>

<div id="outline-container-orge941204" class="outline-2">
<h2 id="orge941204"><span class="section-number-2">2</span> Installation</h2>
<div class="outline-text-2" id="text-2">
<p>
First of all, you should get and install <code>emacs</code>.
</p>
</div>

<div id="outline-container-orge5ba37d" class="outline-3">
<h3 id="orge5ba37d"><span class="section-number-3">2.1</span> Windows/Cygwin</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Cygwin project<sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup> is required for this configuration in Windows, which is a
large collection of GNU and Open Source tools provide functionality similar to a
Linux distribution on Windows.
</p>

<p>
In order to make life easier, we will use <code>apt-cyg</code> <sup><a id="fnr.3" class="footref" href="#fn.3">3</a></sup> to install <code>emacs</code>
and other tools. Let's download <code>apt-cyg</code> and install <code>emacs</code> and <code>git</code>:
</p>

<div class="org-src-container">
<pre class="src src-shell">curl https://raw.githubusercontent.com/transcode-open/apt-cyg/master/apt-cyg &gt; /usr/local/bin/apt-cyg
chmod +x /usr/local/bin/apt-cyg
apt-cyg install emacs-w32 git
</pre>
</div>

<p>
Then start <code>emacs</code> from terminal, and right click the <code>emacs</code> to pin
it to taskbar, and click the property of this icon to add
<code>C:\cygwin64\bin\run.exe emacs</code> in the target field. This way
will hide the black terminal.
</p>
</div>
</div>

<div id="outline-container-orgc7742ab" class="outline-3">
<h3 id="orgc7742ab"><span class="section-number-3">2.2</span> macOS</h3>
<div class="outline-text-3" id="text-2-2">
<p>
For Apple macOS, most UNIX tools are installed already. Homebrew <sup><a id="fnr.4" class="footref" href="#fn.4">4</a></sup> is used
to install additional application if it is missing.
</p>

<div class="org-src-container">
<pre class="src src-shell">/bin/bash -c <span style="color: #2A00FF;">\</span>
<span style="color: #2A00FF;">"$(</span><span style="color: #ff00ff;">curl</span><span style="color: #2A00FF;"> -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7897245" class="outline-3">
<h3 id="org7897245"><span class="section-number-3">2.3</span> Linux</h3>
<div class="outline-text-3" id="text-2-3">
<p>
Most of the external tools I used in this Emacs configuration should be easily
installed or already available in main Linux distributions.
</p>
</div>
</div>
</div>

<div id="outline-container-orgd762051" class="outline-2">
<h2 id="orgd762051"><span class="section-number-2">3</span> Preparation</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org8d02f43" class="outline-3">
<h3 id="org8d02f43"><span class="section-number-3">3.1</span> Install fonts</h3>
<div class="outline-text-3" id="text-3-1">
<p>
Because Incosolata font is really great for programming, and Microsoft Yahei is
nice font to view Chinese characters, you'd better download and install these
two fonts from:
</p>

<ul class="org-ul">
<li><a href="https://fonts.google.com/specimen/Inconsolata">https://fonts.google.com/specimen/Inconsolata</a></li>
<li><a href="https://github.com/loseblue/yaheiInconsolata.ttf">https://github.com/loseblue/yaheiInconsolata.ttf</a></li>
</ul>
</div>
</div>

<div id="outline-container-org8303a38" class="outline-3">
<h3 id="org8303a38"><span class="section-number-3">3.2</span> Get emacs config</h3>
<div class="outline-text-3" id="text-3-2">
<p>
To use of this configuration, you can follow below shell commands to prepare the
emacs configuration files and folders:
</p>

<ul class="org-ul">
<li>back up <code>.emacs</code> file and <code>.emacs.d</code> folder, if you have your own emacs
configuration files</li>
<li>clone <code>kimim-emacs</code> to home folder <code>~</code></li>
<li>copy <code>.emacs</code> from <code>kimim-emacs</code> to <code>~</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-shell">  <span style="color: #7F0055; font-weight: bold;">cd</span> ~ &amp;&amp; mv .emacs .emacs-backup &amp;&amp; mv .emacs.d .emacs.d-backup &amp;&amp; <span style="color: #2A00FF;">\</span>
  git clone https://github.com/kimim/kimim-emacs &amp;&amp; <span style="color: #2A00FF;">\</span>
  cp kimim-emacs/.emacs ~
</pre>
</div>

<p>
This emacs setting uses several path to keep different informations, you should
specify in <code>~/.emacs</code>:
</p>

<ul class="org-ul">
<li><code>kimim/path-sync</code> is the root of sync folder</li>
<li><code>kimim/path-sync-emacs</code> to sync emacs settings</li>
<li><code>kimim/path-org</code> to sync todo list and journals</li>
<li><code>kimim/path-notes</code> to sync notes</li>
<li><code>kimim/path-ref</code> to keep reference documents</li>
<li><code>kimim/path-kimim-emacs</code> where kimim-emacs you clone to</li>
</ul>

<p>
If these pathes are not set, emacs will report errors:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(mapc (<span style="color: #7F0055; font-weight: bold;">lambda</span> (path)
        (<span style="color: #7F0055; font-weight: bold;">if</span> (not (boundp path))
            (<span style="color: #FF0000;">error</span> (concat <span style="color: #2A00FF;">"please set "</span> (symbol-name path) <span style="color: #2A00FF;">" in ~/.emacs"</span>))))
      '(kimim/path-sync
        kimim/path-sync-emacs
        kimim/path-org
        kimim/path-notes
        kimim/path-ref
        kimim/path-kimim-emacs))
</pre>
</div>

<p>
Then execute <code>emacs</code> to bootstrap itself.
</p>
</div>
</div>
</div>

<div id="outline-container-org6641088" class="outline-2">
<h2 id="org6641088"><span class="section-number-2">4</span> Emacs Frame</h2>
<div class="outline-text-2" id="text-4">
<p>
Set look &amp; feel before all other settings.
</p>
</div>

<div id="outline-container-org19a34b9" class="outline-3">
<h3 id="org19a34b9"><span class="section-number-3">4.1</span> Menu Bar and Tool Bar</h3>
<div class="outline-text-3" id="text-4-1">
<p>
Show menu bar only in macOS desktop environment, because the system preserves
menu bar for every applications.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">defun</span> <span style="color: #0000ff; font-weight: bold;">kimim/menu-and-bar</span> ()
  (<span style="color: #7F0055; font-weight: bold;">cond</span>
   ((eq window-system 'w32)
    <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">Enable copy and paste in Win32</span>
    (<span style="color: #7F0055; font-weight: bold;">setq</span> select-enable-clipboard t)
    (menu-bar-mode 0)
    (tool-bar-mode -1)
    (scroll-bar-mode -1))
   ((eq window-system 'ns)
    (menu-bar-mode 1)
    (tool-bar-mode -1)
    (scroll-bar-mode -1))
   ((eq window-system 'x)
    (menu-bar-mode 0)
    (tool-bar-mode -1)
    (scroll-bar-mode -1))
   ((eq window-system nil)
    (menu-bar-mode 0))))

(kimim/menu-and-bar)
</pre>
</div>
</div>
</div>

<div id="outline-container-org36cc1f7" class="outline-3">
<h3 id="org36cc1f7"><span class="section-number-3">4.2</span> Font and Frame Size</h3>
<div class="outline-text-3" id="text-4-2">
<p>
Set default font and frame size for both Windows and macOS. You should
<code>set-default-font</code> first, otherwise, the frame height and width will be
calculated with original default font height and width: <code>frame-char-height</code> and
<code>frame-char-width</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">set default font and default frame dimension</span>
  (<span style="color: #7F0055; font-weight: bold;">defun</span> <span style="color: #0000ff; font-weight: bold;">kimim/frame-and-font</span> ()
    (<span style="color: #7F0055; font-weight: bold;">cond</span>
     ((eq window-system 'w32)
      (<span style="color: #7F0055; font-weight: bold;">cond</span>
       ((&lt; (display-pixel-width) 1400)
        (set-fontset-font
         <span style="color: #2A00FF;">"fontset-default"</span>
         'unicode-bmp (font-spec <span style="color: #7F0055; font-weight: bold;">:family</span> <span style="color: #2A00FF;">"YaheiInconsolata"</span>))
        (set-frame-font <span style="color: #2A00FF;">"Inconsolata-14"</span>))
       ((&gt; (display-pixel-width) 1400)
        (set-fontset-font
         <span style="color: #2A00FF;">"fontset-default"</span>
         'unicode-bmp (font-spec <span style="color: #7F0055; font-weight: bold;">:family</span> <span style="color: #2A00FF;">"YaheiInconsolata"</span>))
        (set-frame-font <span style="color: #2A00FF;">"Inconsolata-14"</span>))))
     ((eq window-system 'ns)
      (set-fontset-font
       <span style="color: #2A00FF;">"fontset-default"</span>
       'unicode-bmp (font-spec <span style="color: #7F0055; font-weight: bold;">:family</span> <span style="color: #2A00FF;">"YaheiInconsolata"</span>))
      (set-frame-font <span style="color: #2A00FF;">"Inconsolata-18"</span>))
     ((eq window-system 'x)
      (set-fontset-font
       <span style="color: #2A00FF;">"fontset-default"</span>
       'unicode-bmp (font-spec <span style="color: #7F0055; font-weight: bold;">:family</span> <span style="color: #2A00FF;">"YaheiInconsolata"</span>))
      (set-frame-font <span style="color: #2A00FF;">"Inconsolata-12"</span>)))
    (<span style="color: #7F0055; font-weight: bold;">when</span> window-system
      <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">top, left ... must be integer</span>
      (add-to-list 'default-frame-alist
                   (cons 'top  (/ (x-display-pixel-height) 10)))
      (add-to-list 'default-frame-alist
                   (cons 'left (/ (x-display-pixel-width) 10)))
      (add-to-list 'default-frame-alist
                   (cons 'height (/ (* 4 (x-display-pixel-height))
                                    (* 5 (frame-char-height)))))
      (add-to-list 'default-frame-alist
                   (cons 'width (/ (* 4 (x-display-pixel-width))
                                   (* 5 (frame-char-width)))))))

  (kimim/frame-and-font)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org2020847" class="outline-2">
<h2 id="org2020847"><span class="section-number-2">5</span> Environment</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-orga788bd8" class="outline-3">
<h3 id="orga788bd8"><span class="section-number-3">5.1</span> PATH, exec-path and Info</h3>
<div class="outline-text-3" id="text-5-1">
<p>
Environment variable <code>PATH</code> is the the searching path of executables by the
shell running in Emacs while <code>exec-path</code> is the search path of Emacs itself. So
we should set both of them to almost the same paths.
</p>

<p>
As I have a Windows box in the office, and a Apple macOS at home, so I need to
specify these variables in different way.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">cond</span>
 ((eq system-type 'cygwin)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> kimim/path-root <span style="color: #2A00FF;">"/"</span>))
 ((eq system-type 'darwin)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> kimim/path-root <span style="color: #2A00FF;">"/"</span>)
  (add-to-list 'exec-path <span style="color: #2A00FF;">"/Library/TeX/texbin"</span>)
  (add-to-list 'exec-path (concat (getenv <span style="color: #2A00FF;">"HOME"</span>) <span style="color: #2A00FF;">"/Library/Python/2.7/bin"</span>)))
 ((eq system-type 'gnu/linux)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> kimim/path-root <span style="color: #2A00FF;">"/"</span>)
  (add-to-list 'exec-path <span style="color: #2A00FF;">"/usr/local/texlive/2020/bin/x86_64-linux/"</span>)))

(add-to-list 'exec-path (concat kimim/path-root <span style="color: #2A00FF;">"bin"</span>))
(add-to-list 'exec-path (concat kimim/path-root <span style="color: #2A00FF;">"usr/bin"</span>))
(add-to-list 'exec-path (concat kimim/path-root <span style="color: #2A00FF;">"usr/local/bin"</span>))
</pre>
</div>

<p>
Then append exec-path to PATH:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(setenv <span style="color: #2A00FF;">"PATH"</span>
        (concat
         (mapconcat #'identity exec-path path-separator)
         (getenv <span style="color: #2A00FF;">"PATH"</span>)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgaf55109" class="outline-3">
<h3 id="orgaf55109"><span class="section-number-3">5.2</span> Language</h3>
<div class="outline-text-3" id="text-5-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(setenv <span style="color: #2A00FF;">"LANG"</span> <span style="color: #2A00FF;">"en_US.UTF-8"</span>)
(setenv <span style="color: #2A00FF;">"LC_ALL"</span> <span style="color: #2A00FF;">"en_US.UTF-8"</span>)
<span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">remove svn log LC_TYPE not defined warning.</span>
(setenv <span style="color: #2A00FF;">"LC_CTYPE"</span> <span style="color: #2A00FF;">"en_US"</span>)
(set-locale-environment <span style="color: #2A00FF;">"en_US.UTF-8"</span>)
(set-language-environment 'English)
(prefer-coding-system 'utf-8)
(set-buffer-file-coding-system 'utf-8)
(set-keyboard-coding-system 'utf-8)
(set-selection-coding-system 'utf-8)
(set-file-name-coding-system 'utf-8)
(set-terminal-coding-system 'utf-8)
(<span style="color: #7F0055; font-weight: bold;">cond</span>
 ((member system-type '(windows-nt cygwin))
  (set-clipboard-coding-system 'utf-16le))
 ((eq system-type 'gnu/linux)
  (set-clipboard-coding-system 'utf-8)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgba6c30c" class="outline-3">
<h3 id="orgba6c30c"><span class="section-number-3">5.3</span> global key map</h3>
<div class="outline-text-3" id="text-5-3">
<p>
Define new command prefix for keys such as "C-x m f", "C-x m v".
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(define-prefix-command 'ctl-x-m-map)
(global-set-key <span style="color: #2A00FF;">"\C-xm"</span> 'ctl-x-m-map)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org19b6099" class="outline-2">
<h2 id="org19b6099"><span class="section-number-2">6</span> Package</h2>
<div class="outline-text-2" id="text-6">
<p>
<code>package</code> <sup><a id="fnr.5" class="footref" href="#fn.5">5</a></sup> is the modern <code>elisp</code> package management system, which let you
easily download and install packages that implement additional features. Each
package is a separate Emacs Lisp program, sometimes including other components
such as an Info manual.
</p>

<p>
All the extensions used in this file are installed and managed by <code>package</code>.
</p>

<p>
Here I use <code>use-package</code> to defer the package loading and even installation,
When you use the <code>:commands</code> keyword, it creates autoloads for those commands
and defers loading of the module until they are used.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">setq</span> package-user-dir <span style="color: #2A00FF;">"~/.emacs.d/elpa"</span>)
(<span style="color: #7F0055; font-weight: bold;">setq</span> package-archives
      '((<span style="color: #2A00FF;">"gnu"</span> . <span style="color: #2A00FF;">"http://mirrors.tuna.tsinghua.edu.cn/elpa/gnu/"</span>)
        (<span style="color: #2A00FF;">"melpa"</span> . <span style="color: #2A00FF;">"http://mirrors.tuna.tsinghua.edu.cn/elpa/melpa/"</span>)
        (<span style="color: #2A00FF;">"org"</span> . <span style="color: #2A00FF;">"http://mirrors.tuna.tsinghua.edu.cn/elpa/org/"</span>)))
(mapc
 (<span style="color: #7F0055; font-weight: bold;">lambda</span> (package)
   (<span style="color: #7F0055; font-weight: bold;">unless</span> (package-installed-p package)
     (<span style="color: #7F0055; font-weight: bold;">progn</span> (message <span style="color: #2A00FF;">"installing %s"</span> package)
            (package-refresh-contents)
            (package-install package))))
 '(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">diminish</span> bind-key))

(<span style="color: #7F0055; font-weight: bold;">require</span> '<span style="color: #110099;">use-package</span>)
(<span style="color: #7F0055; font-weight: bold;">require</span> '<span style="color: #110099;">diminish</span>)
(<span style="color: #7F0055; font-weight: bold;">require</span> '<span style="color: #110099;">bind-key</span>)
<span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">install package if missing</span>
(<span style="color: #7F0055; font-weight: bold;">setq</span> use-package-always-ensure t)
(<span style="color: #7F0055; font-weight: bold;">setq</span> use-package-always-defer t)
(<span style="color: #7F0055; font-weight: bold;">setq</span> use-package-verbose t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orga2df3b1" class="outline-2">
<h2 id="orga2df3b1"><span class="section-number-2">7</span> Title and Header</h2>
<div class="outline-text-2" id="text-7">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">setq</span> frame-title-format
      '(<span style="color: #2A00FF;">""</span> invocation-name <span style="color: #2A00FF;">": "</span>
        (<span style="color: #7F0055; font-weight: bold;">:eval</span> (<span style="color: #7F0055; font-weight: bold;">if</span> (buffer-file-name)
                   (abbreviate-file-name (buffer-file-name))
                 <span style="color: #2A00FF;">"%b"</span>))))

(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">path-headerline-mode</span>
  <span style="color: #7F0055; font-weight: bold;">:commands</span> (path-headerline-mode)
  <span style="color: #7F0055; font-weight: bold;">:config</span>
  <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">only display headerline for real files</span>
  (<span style="color: #7F0055; font-weight: bold;">defun</span> <span style="color: #0000ff; font-weight: bold;">kimim/ph--display-header</span> (orig-fun <span style="color: #000000; font-style: italic; text-decoration: underline;">&amp;rest</span> args)
    (<span style="color: #7F0055; font-weight: bold;">if</span> (buffer-file-name)
        (apply orig-fun args)
      (<span style="color: #7F0055; font-weight: bold;">setq</span> header-line-format nil)))
  (advice-add 'ph--display-header <span style="color: #7F0055; font-weight: bold;">:around</span> #'kimim/ph--display-header))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd9427b5" class="outline-2">
<h2 id="orgd9427b5"><span class="section-number-2">8</span> Mode Line</h2>
<div class="outline-text-2" id="text-8">
<p>
Display time and (line, column) numbers in mode line.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">time</span>
  <span style="color: #7F0055; font-weight: bold;">:defer</span> 1
  <span style="color: #7F0055; font-weight: bold;">:init</span>
  (<span style="color: #7F0055; font-weight: bold;">setq</span> display-time-24hr-format t)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> display-time-day-and-date t)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> display-time-interval 10)
  <span style="color: #7F0055; font-weight: bold;">:config</span>
  (display-time-mode t))

(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">simple</span>
  <span style="color: #7F0055; font-weight: bold;">:ensure</span> nil
  <span style="color: #7F0055; font-weight: bold;">:defer</span> 3
  <span style="color: #7F0055; font-weight: bold;">:config</span>
  (line-number-mode 1)
  (column-number-mode 1))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd4be19b" class="outline-2">
<h2 id="orgd4be19b"><span class="section-number-2">9</span> Color Theme</h2>
<div class="outline-text-2" id="text-9">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">setq</span> font-lock-maximum-decoration t)
(<span style="color: #7F0055; font-weight: bold;">setq</span> font-lock-global-modes '(not shell-mode text-mode))
(<span style="color: #7F0055; font-weight: bold;">setq</span> font-lock-verbose t)
(global-font-lock-mode 1)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">kimim-light-theme</span>
  <span style="color: #7F0055; font-weight: bold;">:ensure</span> nil
  <span style="color: #7F0055; font-weight: bold;">:defer</span> 0
  <span style="color: #7F0055; font-weight: bold;">:load-path</span> <span style="color: #2A00FF;">"~/kimim-emacs/site-lisp/"</span>
  <span style="color: #7F0055; font-weight: bold;">:config</span>
  (load-theme 'kimim-night t))
</pre>
</div>
</div>
</div>

<div id="outline-container-org8e571cd" class="outline-2">
<h2 id="org8e571cd"><span class="section-number-2">10</span> Highlight</h2>
<div class="outline-text-2" id="text-10">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">highlight current line</span>
(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">hl-line</span>
  <span style="color: #7F0055; font-weight: bold;">:defer</span> 5
  <span style="color: #7F0055; font-weight: bold;">:config</span>
  (<span style="color: #7F0055; font-weight: bold;">if</span> window-system
      (global-hl-line-mode 1)))

<span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">highlight current symbol</span>
(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">auto-highlight-symbol</span>
  <span style="color: #7F0055; font-weight: bold;">:diminish</span> auto-highlight-symbol-mode
  <span style="color: #7F0055; font-weight: bold;">:bind</span> (<span style="color: #2A00FF;">"C-x m e"</span> . ahs-edit-mode)
  <span style="color: #7F0055; font-weight: bold;">:config</span>
  (global-auto-highlight-symbol-mode t))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd903b30" class="outline-2">
<h2 id="orgd903b30"><span class="section-number-2">11</span> Dealing with Unicode fonts</h2>
<div class="outline-text-2" id="text-11">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">unicode-fonts</span>
  <span style="color: #7F0055; font-weight: bold;">:defer</span> 3
  <span style="color: #7F0055; font-weight: bold;">:config</span>
  (<span style="color: #7F0055; font-weight: bold;">defun</span> <span style="color: #0000ff; font-weight: bold;">unicode-fonts-setup-advice</span> ()
    (<span style="color: #7F0055; font-weight: bold;">if</span> window-system
        (set-fontset-font
         <span style="color: #2A00FF;">"fontset-default"</span>
         'cjk-misc (font-spec <span style="color: #7F0055; font-weight: bold;">:family</span> <span style="color: #2A00FF;">"YaheiInconsolata"</span>))))
  (advice-add 'unicode-fonts-setup <span style="color: #7F0055; font-weight: bold;">:after</span> 'unicode-fonts-setup-advice)
  (<span style="color: #7F0055; font-weight: bold;">defun</span> <span style="color: #0000ff; font-weight: bold;">kimim/add-font</span> (group font)
    (<span style="color: #7F0055; font-weight: bold;">let</span> ((font-list (assoc group unicode-fonts-block-font-mapping)))
      (<span style="color: #7F0055; font-weight: bold;">setf</span> (cadr font-list) (cons font (cadr font-list)))))
  (seq-map (<span style="color: #7F0055; font-weight: bold;">lambda</span> (group) (kimim/add-font group <span style="color: #2A00FF;">"YaheiInconsolata"</span>))
           '(<span style="color: #2A00FF;">"Bopomofo"</span> <span style="color: #2A00FF;">"Bopomofo Extended"</span> <span style="color: #2A00FF;">"CJK Compatibility"</span> <span style="color: #2A00FF;">"CJK Compatibility Forms"</span>
             <span style="color: #2A00FF;">"CJK Compatibility Ideographs"</span> <span style="color: #2A00FF;">"CJK Compatibility Ideographs Supplement"</span>
             <span style="color: #2A00FF;">"CJK Radicals Supplement"</span> <span style="color: #2A00FF;">"CJK Strokes"</span> <span style="color: #2A00FF;">"CJK Symbols and Punctuation"</span>
             <span style="color: #2A00FF;">"CJK Unified Ideographs"</span> <span style="color: #2A00FF;">"CJK Unified Ideographs Extension A"</span>
             <span style="color: #2A00FF;">"CJK Unified Ideographs Extension B"</span> <span style="color: #2A00FF;">"CJK Unified Ideographs Extension C"</span>
             <span style="color: #2A00FF;">"CJK Unified Ideographs Extension D"</span> <span style="color: #2A00FF;">"CJK Unified Ideographs Extension E"</span>
             <span style="color: #2A00FF;">"Enclosed Ideographic Supplement"</span> <span style="color: #2A00FF;">"Halfwidth and Fullwidth Forms"</span>
             <span style="color: #2A00FF;">"Hangul Compatibility Jamo"</span> <span style="color: #2A00FF;">"Hangul Jamo"</span> <span style="color: #2A00FF;">"Hangul Jamo Extended-A"</span>
             <span style="color: #2A00FF;">"Hangul Jamo Extended-B"</span> <span style="color: #2A00FF;">"Hangul Syllables"</span> <span style="color: #2A00FF;">"Ideographic Description Characters"</span>
             <span style="color: #2A00FF;">"IPA Extensions"</span> <span style="color: #2A00FF;">"Mathematical Alphanumeric Symbols"</span>))
  (seq-map (<span style="color: #7F0055; font-weight: bold;">lambda</span> (group) (kimim/add-font group <span style="color: #2A00FF;">"Consolas"</span>))
           '(<span style="color: #2A00FF;">"Combining Diacritical Marks"</span> <span style="color: #2A00FF;">"Combining Half Marks"</span> <span style="color: #2A00FF;">"Cyrillic"</span>
             <span style="color: #2A00FF;">"Cyrillic Supplement"</span> <span style="color: #2A00FF;">"Greek Extended"</span> <span style="color: #2A00FF;">"Greek and Coptic"</span> <span style="color: #2A00FF;">"Phonetic Extensions"</span>
             <span style="color: #2A00FF;">"Phonetic Extensions Supplement"</span> <span style="color: #2A00FF;">"Superscripts and Subscripts"</span>))
  (add-to-list 'unicode-fonts-block-font-mapping
               '(<span style="color: #2A00FF;">"Spacing Modifier Letters"</span>
                 (<span style="color: #2A00FF;">"Consolas"</span> <span style="color: #2A00FF;">"Monaco"</span> <span style="color: #2A00FF;">"YaheiInconsolata"</span>)))
  (unicode-fonts-setup))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf359e04" class="outline-2">
<h2 id="orgf359e04"><span class="section-number-2">12</span> Other Visual Element</h2>
<div class="outline-text-2" id="text-12">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">setq</span> inhibit-startup-message t)
(<span style="color: #7F0055; font-weight: bold;">setq</span> initial-scratch-message nil)
(<span style="color: #7F0055; font-weight: bold;">setq</span> visible-bell t)
(<span style="color: #7F0055; font-weight: bold;">setq</span> ring-bell-function #'ignore)
(fset 'yes-or-no-p 'y-or-n-p)
(show-paren-mode 1)
(<span style="color: #7F0055; font-weight: bold;">setq</span> blink-cursor-blinks 3)
(blink-cursor-mode 1)
(tooltip-mode nil)
</pre>
</div>
</div>
</div>

<div id="outline-container-org39dc2e7" class="outline-2">
<h2 id="org39dc2e7"><span class="section-number-2">13</span> Help</h2>
<div class="outline-text-2" id="text-13">
</div>
<div id="outline-container-org5117120" class="outline-3">
<h3 id="org5117120"><span class="section-number-3">13.1</span> Info</h3>
<div class="outline-text-3" id="text-13-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">info</span>
  <span style="color: #7F0055; font-weight: bold;">:commands</span> (info)
  <span style="color: #7F0055; font-weight: bold;">:config</span>
  (add-to-list 'Info-additional-directory-list
               (concat kimim/path-root <span style="color: #2A00FF;">"usr/share/info"</span>))
  (add-to-list 'Info-additional-directory-list
               (concat kimim/path-root <span style="color: #2A00FF;">"usr/local/share/info"</span>))
  <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">additional info, collected from internet</span>
  (add-to-list 'Info-additional-directory-list
               <span style="color: #2A00FF;">"~/info"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb7800e8" class="outline-3">
<h3 id="orgb7800e8"><span class="section-number-3">13.2</span> tldr</h3>
<div class="outline-text-3" id="text-13-2">
<p>
TL;DR stands for "Too Long; Didn't Read"<sup><a id="fnr.6" class="footref" href="#fn.6">6</a></sup>. <code>tldr.el</code> <sup><a id="fnr.7" class="footref" href="#fn.7">7</a></sup> is the Emacs
client.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">tldr</span>)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgaeaa06e" class="outline-2">
<h2 id="orgaeaa06e"><span class="section-number-2">14</span> Controlling</h2>
<div class="outline-text-2" id="text-14">
</div>
<div id="outline-container-org8d93000" class="outline-3">
<h3 id="org8d93000"><span class="section-number-3">14.1</span> Window and Frame</h3>
<div class="outline-text-3" id="text-14-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">winner</span>
  <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">restore windows configuration, built-in package</span>
  <span style="color: #7F0055; font-weight: bold;">:commands</span> winner-mode
  <span style="color: #7F0055; font-weight: bold;">:config</span>
  (winner-mode t))

(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">window-numbering</span>
  <span style="color: #7F0055; font-weight: bold;">:commands</span> window-numbering-mode
  <span style="color: #7F0055; font-weight: bold;">:config</span>
  (window-numbering-mode 1))

(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">frame</span>
  <span style="color: #7F0055; font-weight: bold;">:ensure</span> nil
  <span style="color: #7F0055; font-weight: bold;">:defer</span> 1
  <span style="color: #7F0055; font-weight: bold;">:bind</span> (<span style="color: #2A00FF;">"C-x m w"</span> . make-frame)
  <span style="color: #7F0055; font-weight: bold;">:config</span>
  (add-hook 'after-make-frame-functions
            (<span style="color: #7F0055; font-weight: bold;">lambda</span> (frame)
              (select-frame frame)
              (kimim/menu-and-bar)
              (kimim/frame-and-font))))
</pre>
</div>

<p>
scroll slowly with touchpad.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">setq</span> mouse-wheel-scroll-amount '(0.01))
</pre>
</div>
</div>
</div>

<div id="outline-container-org7eda4da" class="outline-3">
<h3 id="org7eda4da"><span class="section-number-3">14.2</span> Command</h3>
<div class="outline-text-3" id="text-14-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">https://github.com/justbur/emacs-which-key</span>
(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">which-key</span>
  <span style="color: #7F0055; font-weight: bold;">:defer</span> 3
  <span style="color: #7F0055; font-weight: bold;">:diminish</span> which-key-mode
  <span style="color: #7F0055; font-weight: bold;">:config</span>
  <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">use minibuffer as the popup type, otherwise conflict in ecb mode</span>
  (<span style="color: #7F0055; font-weight: bold;">setq</span> which-key-popup-type 'minibuffer)
  (which-key-mode 1))

<span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">smex will list the recent function on top of the cmd list</span>
(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">smex</span>
  <span style="color: #7F0055; font-weight: bold;">:commands</span> (smex)
  <span style="color: #7F0055; font-weight: bold;">:config</span>
  (smex-initialize))

(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">counsel</span>
  <span style="color: #7F0055; font-weight: bold;">:defer</span> 1
  <span style="color: #7F0055; font-weight: bold;">:bind</span>
  ((<span style="color: #2A00FF;">"M-x"</span> . counsel-M-x)
   (<span style="color: #2A00FF;">"C-x C-f"</span> . counsel-find-file)
   (<span style="color: #2A00FF;">"C-x m f"</span> . counsel-describe-function)
   (<span style="color: #2A00FF;">"C-x m v"</span> . counsel-describe-variable)
   (<span style="color: #2A00FF;">"C-x m l"</span> . counsel-load-library)
   (<span style="color: #2A00FF;">"C-x m i"</span> . counsel-info-lookup-symbol)
   (<span style="color: #2A00FF;">"C-x m j"</span> . counsel-bookmark)
   (<span style="color: #2A00FF;">"C-x m r"</span> . counsel-recentf)
   (<span style="color: #2A00FF;">"C-x m u"</span> . counsel-unicode-char)
   (<span style="color: #2A00FF;">"C-c j"</span> . counsel-git-grep)
   (<span style="color: #2A00FF;">"C-c g"</span> . counsel-grep)
   (<span style="color: #2A00FF;">"C-x b"</span> . counsel-ibuffer)
   (<span style="color: #2A00FF;">"C-c k"</span> . counsel-ag)
   (<span style="color: #2A00FF;">"C-c p"</span> . counsel-pt)
   (<span style="color: #2A00FF;">"C-x l"</span> . counsel-locate)
   <span style="color: #7F0055; font-weight: bold;">:map</span> read-expression-map
   (<span style="color: #2A00FF;">"C-r"</span> . counsel-minibuffer-history))
  <span style="color: #7F0055; font-weight: bold;">:config</span>
  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">ivy</span>)
  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">smex</span>)
  (add-hook 'counsel-grep-post-action-hook 'recenter)
  (ivy-mode 1))
</pre>
</div>
</div>
</div>

<div id="outline-container-org824c82c" class="outline-3">
<h3 id="org824c82c"><span class="section-number-3">14.3</span> Key Frequency</h3>
<div class="outline-text-3" id="text-14-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">keyfreq</span>
  <span style="color: #7F0055; font-weight: bold;">:config</span>
  (keyfreq-mode)
  (keyfreq-autosave-mode)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> keyfreq-file <span style="color: #2A00FF;">"~/.emacs.d/emacs.keyfreq"</span>))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org653124d" class="outline-2">
<h2 id="org653124d"><span class="section-number-2">15</span> Editing</h2>
<div class="outline-text-2" id="text-15">
</div>
<div id="outline-container-org1fff6ee" class="outline-3">
<h3 id="org1fff6ee"><span class="section-number-3">15.1</span> General</h3>
<div class="outline-text-3" id="text-15-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">setq</span> inhibit-eol-conversion nil)
<span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">fill-column is a buffer-local variable</span>
<span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">use setq-default to change it globally</span>
(<span style="color: #7F0055; font-weight: bold;">setq-default</span> fill-column 80)
(<span style="color: #7F0055; font-weight: bold;">if</span> window-system
    (<span style="color: #7F0055; font-weight: bold;">setq-default</span> fill-column
                  (min 80
                       (ceiling
                        (/ (x-display-pixel-width)
                           (frame-char-width)
                           2.3))))
  (<span style="color: #7F0055; font-weight: bold;">setq-default</span> fill-column 80))
(toggle-word-wrap -1)
(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">drag-stuff</span>
  <span style="color: #7F0055; font-weight: bold;">:diminish</span> drag-stuff-mode
  <span style="color: #7F0055; font-weight: bold;">:config</span>
  (drag-stuff-global-mode 1))
(delete-selection-mode 1)
(<span style="color: #7F0055; font-weight: bold;">setq</span> kill-ring-max 200)
(<span style="color: #7F0055; font-weight: bold;">setq</span> kill-whole-line t)
(<span style="color: #7F0055; font-weight: bold;">setq</span> require-final-newline t)
(<span style="color: #7F0055; font-weight: bold;">setq-default</span> tab-width 4)
(<span style="color: #7F0055; font-weight: bold;">setq</span> tab-stop-list
      (number-sequence 4 120 4))
(<span style="color: #7F0055; font-weight: bold;">setq</span> track-eol t)
(<span style="color: #7F0055; font-weight: bold;">setq</span> backup-directory-alist '((<span style="color: #2A00FF;">"."</span> . <span style="color: #2A00FF;">"~/temp"</span>)))
(<span style="color: #7F0055; font-weight: bold;">setq</span> version-control t)
(<span style="color: #7F0055; font-weight: bold;">setq</span> kept-old-versions 10)
(<span style="color: #7F0055; font-weight: bold;">setq</span> kept-new-versions 20)
(<span style="color: #7F0055; font-weight: bold;">setq</span> delete-old-versions t)
(<span style="color: #7F0055; font-weight: bold;">setq</span> backup-by-copying t)

(<span style="color: #7F0055; font-weight: bold;">setq</span> auto-save-interval 50)
(<span style="color: #7F0055; font-weight: bold;">setq</span> auto-save-timeout 60)
(<span style="color: #7F0055; font-weight: bold;">setq</span> auto-save-default nil)
(<span style="color: #7F0055; font-weight: bold;">setq</span> auto-save-list-file-prefix <span style="color: #2A00FF;">"~/temp/auto-saves-"</span>)
(<span style="color: #7F0055; font-weight: bold;">setq</span> auto-save-file-name-transforms `((<span style="color: #2A00FF;">".*"</span>  , <span style="color: #2A00FF;">"~/temp/"</span>)))
(<span style="color: #7F0055; font-weight: bold;">setq</span> create-lockfiles nil)
(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">time-stamp</span>
  <span style="color: #7F0055; font-weight: bold;">:config</span>
  (<span style="color: #7F0055; font-weight: bold;">setq</span> time-stamp-active t)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> time-stamp-warn-inactive t)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> time-stamp-format <span style="color: #2A00FF;">"%:y-%02m-%02d %3a %02H:%02M:%02S Kimi MA"</span>)
  (add-hook 'write-file-functions 'time-stamp))

(<span style="color: #7F0055; font-weight: bold;">defun</span> <span style="color: #0000ff; font-weight: bold;">kimim/save-buffer-advice</span> (orig-fun <span style="color: #000000; font-style: italic; text-decoration: underline;">&amp;rest</span> arg)
  (delete-trailing-whitespace)
  (apply orig-fun arg))

(advice-add 'save-buffer <span style="color: #7F0055; font-weight: bold;">:around</span> #'kimim/save-buffer-advice)

(<span style="color: #7F0055; font-weight: bold;">setq</span> ispell-program-name <span style="color: #2A00FF;">"aspell"</span>)
(diminish 'visual-line-mode)
(add-hook 'text-mode-hook
          (<span style="color: #7F0055; font-weight: bold;">lambda</span> ()
            (<span style="color: #7F0055; font-weight: bold;">when</span> (derived-mode-p 'org-mode 'markdown-mode 'text-mode)
              (visual-line-mode))))
(<span style="color: #7F0055; font-weight: bold;">setq-default</span> indent-tabs-mode nil)

(<span style="color: #7F0055; font-weight: bold;">setq</span> uniquify-buffer-name-style 'forward)
(<span style="color: #7F0055; font-weight: bold;">setq</span> suggest-key-bindings 5)
(<span style="color: #7F0055; font-weight: bold;">setq</span> auto-mode-alist
      (append '((<span style="color: #2A00FF;">"\\.css\\'"</span> . css-mode)
                (<span style="color: #2A00FF;">"\\.S\\'"</span> . asm-mode)
                (<span style="color: #2A00FF;">"\\.md\\'"</span> . markdown-mode)
                (<span style="color: #2A00FF;">"\\.markdown\\'"</span> . markdown-mode)
                (<span style="color: #2A00FF;">"\\.svg\\'"</span> . html-mode)
                (<span style="color: #2A00FF;">"\\.pas\\'"</span> . delphi-mode)
                (<span style="color: #2A00FF;">"\\.txt\\'"</span> . poly-org-mode)
                (<span style="color: #2A00FF;">"\\.org\\'"</span> . poly-org-mode)
                )
              auto-mode-alist))

(<span style="color: #7F0055; font-weight: bold;">require</span> '<span style="color: #110099;">saveplace</span>)
(<span style="color: #7F0055; font-weight: bold;">setq-default</span> save-place t)
(<span style="color: #7F0055; font-weight: bold;">setq</span> save-place-file (expand-file-name <span style="color: #2A00FF;">"saveplace"</span> <span style="color: #2A00FF;">"~"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org8dbcfc2" class="outline-3">
<h3 id="org8dbcfc2"><span class="section-number-3">15.2</span> visual-fill-mode</h3>
<div class="outline-text-3" id="text-15-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">visual-fill-column</span>)
(<span style="color: #7F0055; font-weight: bold;">setq</span> visual-fill-column-width fill-column)
(<span style="color: #7F0055; font-weight: bold;">setq</span> visual-fill-column-center-text t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgafe4f46" class="outline-3">
<h3 id="orgafe4f46"><span class="section-number-3">15.3</span> undo-tree</h3>
<div class="outline-text-3" id="text-15-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">undo-tree</span>
    <span style="color: #7F0055; font-weight: bold;">:diminish</span> undo-tree-mode
    <span style="color: #7F0055; font-weight: bold;">:config</span>
    (global-undo-tree-mode)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> undo-tree-visualizer-timestamps t))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org315b09b" class="outline-2">
<h2 id="org315b09b"><span class="section-number-2">16</span> File Management</h2>
<div class="outline-text-2" id="text-16">
</div>
<div id="outline-container-org1f0658a" class="outline-3">
<h3 id="org1f0658a"><span class="section-number-3">16.1</span> dired</h3>
<div class="outline-text-3" id="text-16-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">dired</span>
  <span style="color: #7F0055; font-weight: bold;">:ensure</span> nil
  <span style="color: #7F0055; font-weight: bold;">:bind</span>
  ((<span style="color: #2A00FF;">"C-x C-j"</span> . dired-jump)
   <span style="color: #7F0055; font-weight: bold;">:map</span> dired-mode-map
   (<span style="color: #2A00FF;">"&lt;left&gt;"</span> . dired-up-directory)
   (<span style="color: #2A00FF;">"&lt;right&gt;"</span> . dired-find-file)
   (<span style="color: #2A00FF;">"o"</span> . kimim/open-in-external-app)
   (<span style="color: #2A00FF;">"M-n"</span> . dired-narrow))
  <span style="color: #7F0055; font-weight: bold;">:config</span>
  (<span style="color: #7F0055; font-weight: bold;">require</span> '<span style="color: #110099;">dired-x</span>)
  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">dired-narrow</span>)
  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">dired-collapse</span>)
  (add-hook 'dired-mode-hook
            (<span style="color: #7F0055; font-weight: bold;">lambda</span> ()
              (turn-on-gnus-dired-mode)
              <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">Set dired-x buffer-local variables here.  For example:</span>
              (dired-omit-mode 1)
              (dired-collapse-mode 1)
              (<span style="color: #7F0055; font-weight: bold;">setq</span> dired-omit-localp t)
              (<span style="color: #7F0055; font-weight: bold;">setq</span> dired-omit-files
                    (concat <span style="color: #2A00FF;">"|NTUSER</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">|</span><span style="color: #2A00FF;">ntuser\\"</span>
                            <span style="color: #2A00FF;">"|Cookies</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">|</span><span style="color: #2A00FF;">AppData\\"</span>
                            <span style="color: #2A00FF;">"|Contacts</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">|</span><span style="color: #2A00FF;">Links\\"</span>
                            <span style="color: #2A00FF;">"|Intel</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">|</span><span style="color: #2A00FF;">NetHood\\"</span>
                            <span style="color: #2A00FF;">"|PrintHood</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">|</span><span style="color: #2A00FF;">Recent\\"</span>
                            <span style="color: #2A00FF;">"|Start</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">|</span><span style="color: #2A00FF;">SendTo\\"</span>
                            <span style="color: #2A00FF;">"|^\\.DS_Store\\"</span>
                            <span style="color: #2A00FF;">"|qms-bmh"</span>))))
  (<span style="color: #7F0055; font-weight: bold;">setq</span> dired-listing-switches <span style="color: #2A00FF;">"-Avhlgo --group-directories-first"</span>)
  (<span style="color: #7F0055; font-weight: bold;">if</span> (eq system-type 'darwin)
      (<span style="color: #7F0055; font-weight: bold;">setq</span> dired-listing-switches <span style="color: #2A00FF;">"-Avhlgo"</span>))

  (<span style="color: #7F0055; font-weight: bold;">setq</span> dired-recursive-copies t)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> dired-recursive-deletes t)

  (<span style="color: #7F0055; font-weight: bold;">defadvice</span> <span style="color: #0000ff; font-weight: bold;">dired-next-line</span> (after dired-next-line-advice (arg) activate)
    <span style="color: #2A00FF;">"Move down lines then position at filename, advice"</span>
    (<span style="color: #7F0055; font-weight: bold;">interactive</span> <span style="color: #2A00FF;">"p"</span>)
    (<span style="color: #7F0055; font-weight: bold;">if</span> (eobp)
        (<span style="color: #7F0055; font-weight: bold;">progn</span>
          (goto-char (point-min))
          (forward-line 2)
          (dired-move-to-filename))))

  (<span style="color: #7F0055; font-weight: bold;">defadvice</span> <span style="color: #0000ff; font-weight: bold;">dired-previous-line</span> (before dired-previous-line-advice (arg) activate)
    <span style="color: #2A00FF;">"Move up lines then position at filename, advice"</span>
    (<span style="color: #7F0055; font-weight: bold;">interactive</span> <span style="color: #2A00FF;">"p"</span>)
    (<span style="color: #7F0055; font-weight: bold;">if</span> (= 3 (line-number-at-pos))
        (goto-char (point-max)))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgca55d31" class="outline-3">
<h3 id="orgca55d31"><span class="section-number-3">16.2</span> dired-collapse</h3>
<div class="outline-text-3" id="text-16-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">dired-collapse</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org3f6617b" class="outline-3">
<h3 id="org3f6617b"><span class="section-number-3">16.3</span> dired-narrow</h3>
<div class="outline-text-3" id="text-16-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">dired-narrow</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-orga09acc9" class="outline-3">
<h3 id="orga09acc9"><span class="section-number-3">16.4</span> ibuffer</h3>
<div class="outline-text-3" id="text-16-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">ibuffer</span>
  <span style="color: #7F0055; font-weight: bold;">:bind</span> ((<span style="color: #2A00FF;">"C-x C-b"</span> . ibuffer-other-window)
         <span style="color: #7F0055; font-weight: bold;">:map</span> ibuffer-mode-map
         (<span style="color: #2A00FF;">"&lt;right&gt;"</span> . ibuffer-visit-buffer))
  <span style="color: #7F0055; font-weight: bold;">:config</span>
  (<span style="color: #7F0055; font-weight: bold;">defun</span> <span style="color: #0000ff; font-weight: bold;">ibuffer-visit-buffer-other-window</span> (<span style="color: #000000; font-style: italic; text-decoration: underline;">&amp;optional</span> noselect)
    <span style="color: #2A00FF;">"Visit the buffer on this line in another window."</span>
    (<span style="color: #7F0055; font-weight: bold;">interactive</span>)
    (<span style="color: #7F0055; font-weight: bold;">let</span> ((buf (ibuffer-current-buffer t)))
      (bury-buffer (current-buffer))
      (<span style="color: #7F0055; font-weight: bold;">if</span> noselect
          (<span style="color: #7F0055; font-weight: bold;">let</span> ((curwin (selected-window)))
            (pop-to-buffer buf)
            (select-window curwin))
        (switch-to-buffer-other-window buf)
        (kill-buffer-and-its-windows <span style="color: #2A00FF;">"*Ibuffer*"</span>)
        )))

  <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">Use human readable Size column instead of original one</span>
  (<span style="color: #7F0055; font-weight: bold;">define-ibuffer-column</span> size-h
    (<span style="color: #7F0055; font-weight: bold;">:name</span> <span style="color: #2A00FF;">"Size"</span> <span style="color: #7F0055; font-weight: bold;">:inline</span> t)
    (<span style="color: #7F0055; font-weight: bold;">cond</span>
     ((&gt; (buffer-size) 1000000) (format <span style="color: #2A00FF;">"%7.1fM"</span> (/ (buffer-size) 1000000.0)))
     ((&gt; (buffer-size) 100000) (format <span style="color: #2A00FF;">"%7.0fk"</span> (/ (buffer-size) 1000.0)))
     ((&gt; (buffer-size) 1000) (format <span style="color: #2A00FF;">"%7.1fk"</span> (/ (buffer-size) 1000.0)))
     (t (format <span style="color: #2A00FF;">"%8d"</span> (buffer-size)))))

  <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">Modify the default ibuffer-formats</span>
  (<span style="color: #7F0055; font-weight: bold;">setq</span> ibuffer-formats
        '((mark modified read-only <span style="color: #2A00FF;">" "</span>
                (name 32 32 <span style="color: #7F0055; font-weight: bold;">:left</span> <span style="color: #7F0055; font-weight: bold;">:elide</span>)
                <span style="color: #2A00FF;">" "</span>
                (size-h 9 -1 <span style="color: #7F0055; font-weight: bold;">:right</span>)
                <span style="color: #2A00FF;">" "</span>
                (mode 14 14 <span style="color: #7F0055; font-weight: bold;">:left</span> <span style="color: #7F0055; font-weight: bold;">:elide</span>)
                <span style="color: #2A00FF;">" "</span>
                filename-and-process))))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgafd1497" class="outline-2">
<h2 id="orgafd1497"><span class="section-number-2">17</span> Navigation</h2>
<div class="outline-text-2" id="text-17">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">bookmark setting</span>
  (<span style="color: #7F0055; font-weight: bold;">setq</span> bookmark-default-file <span style="color: #2A00FF;">"~/.emacs.d/emacs.bmk"</span>)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> bookmark-save-flag 1)

  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">bm</span>
    <span style="color: #7F0055; font-weight: bold;">:bind</span> ((<span style="color: #2A00FF;">"C-x m t"</span> . bm-toggle)
           (<span style="color: #2A00FF;">"C-x m s"</span> . bm-show-all)))

  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">ace-jump-mode</span>
    <span style="color: #7F0055; font-weight: bold;">:bind</span>
    (<span style="color: #2A00FF;">"C-x j"</span> . ace-jump-mode)
    (<span style="color: #2A00FF;">"M-g j"</span> . ace-jump-mode)
    (<span style="color: #2A00FF;">"C-`"</span> . ace-jump-mode)
    (<span style="color: #2A00FF;">"&lt;apps&gt;"</span> . ace-jump-mode))

  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">ace-window</span>
    <span style="color: #7F0055; font-weight: bold;">:bind</span>
    (<span style="color: #2A00FF;">"C-\""</span> . ace-window)
    <span style="color: #7F0055; font-weight: bold;">:config</span>
    (<span style="color: #7F0055; font-weight: bold;">setq</span> aw-keys '(?a ?s ?d ?f ?g ?h ?j ?k ?l)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbb978f1" class="outline-2">
<h2 id="orgbb978f1"><span class="section-number-2">18</span> Search and Finding</h2>
<div class="outline-text-2" id="text-18">
</div>
<div id="outline-container-org2d22937" class="outline-3">
<h3 id="org2d22937"><span class="section-number-3">18.1</span> swiper replaces isearch</h3>
<div class="outline-text-3" id="text-18-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">swiper</span>
    <span style="color: #7F0055; font-weight: bold;">:init</span> (<span style="color: #7F0055; font-weight: bold;">setq</span> swiper-action-recenter t)
    <span style="color: #7F0055; font-weight: bold;">:bind</span>
    (<span style="color: #2A00FF;">"C-s"</span> . swiper))
</pre>
</div>
</div>
</div>

<div id="outline-container-org94712f4" class="outline-3">
<h3 id="org94712f4"><span class="section-number-3">18.2</span> ag: the silver searcher</h3>
<div class="outline-text-3" id="text-18-2">
<p>
<code>ag</code> <sup><a id="fnr.8" class="footref" href="#fn.8">8</a></sup> is really a very fast grep tool, and <code>ag.el</code> <sup><a id="fnr.9" class="footref" href="#fn.9">9</a></sup> provide the
Emacs interface to <code>ag</code>:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">ag</span>
    <span style="color: #7F0055; font-weight: bold;">:bind</span>
    (<span style="color: #2A00FF;">"C-x g"</span> . ag-project)
    <span style="color: #7F0055; font-weight: bold;">:config</span>
    (<span style="color: #7F0055; font-weight: bold;">setq</span> ag-highlight-search t))
</pre>
</div>
</div>
</div>

<div id="outline-container-org524e04a" class="outline-3">
<h3 id="org524e04a"><span class="section-number-3">18.3</span> pt: the platium searcher</h3>
<div class="outline-text-3" id="text-18-3">
<p>
Because <code>counsel-ag</code> is not working in my Win64 machine, so I switch to <code>pt</code>
now.
</p>

<p>
Download <code>pt</code> from
<a href="https://github.com/monochromegane/the_platinum_searcher/releases">https://github.com/monochromegane/the_platinum_searcher/releases</a>, and it works
out of the box.
</p>
</div>
</div>

<div id="outline-container-org85bc1eb" class="outline-3">
<h3 id="org85bc1eb"><span class="section-number-3">18.4</span> imenu &amp; imenu-anywhere</h3>
<div class="outline-text-3" id="text-18-4">
<p>
<code>imenu</code> is used to navigate the function definitions in current buffer.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">imenu</span>
    <span style="color: #7F0055; font-weight: bold;">:bind</span> (<span style="color: #2A00FF;">"C-c C-i"</span> . imenu)
    <span style="color: #7F0055; font-weight: bold;">:config</span>
    (advice-add 'imenu-default-goto-function
                <span style="color: #7F0055; font-weight: bold;">:around</span>
                #'kimim/imenu-default-goto-function-advice))

  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">imenu-anywhere</span>
    <span style="color: #7F0055; font-weight: bold;">:bind</span> (<span style="color: #2A00FF;">"C-c i"</span> . imenu-anywhere))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgfad495d" class="outline-2">
<h2 id="orgfad495d"><span class="section-number-2">19</span> auto-complete</h2>
<div class="outline-text-2" id="text-19">
</div>
<div id="outline-container-org84e1fbb" class="outline-3">
<h3 id="org84e1fbb"><span class="section-number-3">19.1</span> abbrev</h3>
<div class="outline-text-3" id="text-19-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(diminish 'abbrev-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb348962" class="outline-3">
<h3 id="orgb348962"><span class="section-number-3">19.2</span> ivy-mode</h3>
<div class="outline-text-3" id="text-19-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">ivy</span>
    <span style="color: #7F0055; font-weight: bold;">:diminish</span> ivy-mode
    <span style="color: #7F0055; font-weight: bold;">:bind</span> (<span style="color: #2A00FF;">"&lt;f6&gt;"</span> . ivy-resume)
    <span style="color: #7F0055; font-weight: bold;">:config</span>
    (<span style="color: #7F0055; font-weight: bold;">setq</span> ivy-use-virtual-buffers t)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> ivy-count-format <span style="color: #2A00FF;">"(%d/%d) "</span>)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> ivy-wrap nil)
    (ivy-mode 1))
</pre>
</div>
</div>
</div>

<div id="outline-container-org26a2de4" class="outline-3">
<h3 id="org26a2de4"><span class="section-number-3">19.3</span> auto parenthesis</h3>
<div class="outline-text-3" id="text-19-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">add pair parenthis and quote automatically</span>
  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">autopair</span>
    <span style="color: #7F0055; font-weight: bold;">:diminish</span> autopair-mode
    <span style="color: #7F0055; font-weight: bold;">:config</span>
    (autopair-global-mode 1))
</pre>
</div>
</div>
</div>

<div id="outline-container-org6cbc398" class="outline-3">
<h3 id="org6cbc398"><span class="section-number-3">19.4</span> yasnippet</h3>
<div class="outline-text-3" id="text-19-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">yasnippet</span>
    <span style="color: #7F0055; font-weight: bold;">:defer</span> 10
    <span style="color: #7F0055; font-weight: bold;">:config</span>
    (<span style="color: #7F0055; font-weight: bold;">require</span> '<span style="color: #110099;">yasnippet</span>)
    (add-to-list
     'yas-snippet-dirs (concat kimim/path-sync-emacs <span style="color: #2A00FF;">"snippets"</span>))
    (yas-global-mode 1)
    (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">company</span>)
    (eval-after-load 'company
      '(add-to-list  'company-backends 'company-yasnippet))
    (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">warnings</span>)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> warning-suppress-types '((yasnippet backquote-change))))
</pre>
</div>

<p>
In order to remove following warning:
</p>

<blockquote>
<p>
Warning (yasnippet): ‘xxx’ modified buffer in a backquote expression.
  To hide this warning, add (yasnippet backquote-change) to ‘warning-suppress-types’.
</p>
</blockquote>
</div>
</div>

<div id="outline-container-orge477fc5" class="outline-3">
<h3 id="orge477fc5"><span class="section-number-3">19.5</span> company dict</h3>
<div class="outline-text-3" id="text-19-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">company-dict</span>
    <span style="color: #7F0055; font-weight: bold;">:config</span>
    <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">Where to look for dictionary files</span>
    (<span style="color: #7F0055; font-weight: bold;">setq</span> company-dict-dir (concat kimim/path-sync-emacs <span style="color: #2A00FF;">"dict"</span>))
    <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">Optional: if you want it available everywhere</span>
    (eval-after-load 'company
      '(add-to-list 'company-backends 'company-dict)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org9daa0b0" class="outline-3">
<h3 id="org9daa0b0"><span class="section-number-3">19.6</span> company mode</h3>
<div class="outline-text-3" id="text-19-6">
<p>
English word list fetch from <a href="https://github.com/dwyl/english-words">https://github.com/dwyl/english-words</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">company-try-hard</span>
    <span style="color: #7F0055; font-weight: bold;">:bind</span> (<span style="color: #2A00FF;">"C-\\"</span> . company-try-hard))

  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">company</span>
    <span style="color: #7F0055; font-weight: bold;">:bind</span> (<span style="color: #7F0055; font-weight: bold;">:map</span> company-active-map
                (<span style="color: #2A00FF;">"C-n"</span> . (<span style="color: #7F0055; font-weight: bold;">lambda</span> () (<span style="color: #7F0055; font-weight: bold;">interactive</span>) (company-complete-common-or-cycle 1)))
                (<span style="color: #2A00FF;">"C-p"</span> . (<span style="color: #7F0055; font-weight: bold;">lambda</span> () (<span style="color: #7F0055; font-weight: bold;">interactive</span>) (company-complete-common-or-cycle -1))))
    <span style="color: #7F0055; font-weight: bold;">:diminish</span> company-mode
    <span style="color: #7F0055; font-weight: bold;">:commands</span> (global-company-mode)
    <span style="color: #7F0055; font-weight: bold;">:config</span>
    (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">company-dict</span>)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> company-idle-delay 0)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> company-minimum-prefix-length 1)
    <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">macOS will use system dict file directly</span>
    (<span style="color: #7F0055; font-weight: bold;">cond</span> ((eq system-type 'windows-nt)
           (<span style="color: #7F0055; font-weight: bold;">setq</span> ispell-alternate-dictionary <span style="color: #2A00FF;">"~/.emacs.d/dict/words3.txt"</span>)))
    (eval-after-load 'company
      '(add-to-list 'company-backends 'company-ispell)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdcf9857" class="outline-3">
<h3 id="orgdcf9857"><span class="section-number-3">19.7</span> company statistics</h3>
<div class="outline-text-3" id="text-19-7">
<p>
Sort candidates using completion history.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">company-statistics</span>
    <span style="color: #7F0055; font-weight: bold;">:config</span>
    (company-statistics-mode 1))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orge367f2d" class="outline-2">
<h2 id="orge367f2d"><span class="section-number-2">20</span> Programming General</h2>
<div class="outline-text-2" id="text-20">
</div>
<div id="outline-container-org15e68e1" class="outline-3">
<h3 id="org15e68e1"><span class="section-number-3">20.1</span> Compiling</h3>
<div class="outline-text-3" id="text-20-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">setq</span> next-error-recenter 20)
  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"C-&lt;f11&gt;"</span> 'compile)
</pre>
</div>
</div>
</div>

<div id="outline-container-org5d9b1a0" class="outline-3">
<h3 id="org5d9b1a0"><span class="section-number-3">20.2</span> Tagging</h3>
<div class="outline-text-3" id="text-20-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">ggtags</span>
    <span style="color: #7F0055; font-weight: bold;">:bind</span> ((<span style="color: #2A00FF;">"C-c f"</span> . ggtags-find-file)
           (<span style="color: #2A00FF;">"M-."</span> . ggtags-find-tag-dwim))
    <span style="color: #7F0055; font-weight: bold;">:config</span>
    (<span style="color: #7F0055; font-weight: bold;">setq</span> ggtags-global-ignore-case t)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> ggtags-sort-by-nearness t))
</pre>
</div>
</div>
</div>

<div id="outline-container-org5c8ebbe" class="outline-3">
<h3 id="org5c8ebbe"><span class="section-number-3">20.3</span> Version Control</h3>
<div class="outline-text-3" id="text-20-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">magit</span>
    <span style="color: #7F0055; font-weight: bold;">:bind</span> (<span style="color: #2A00FF;">"C-x m g"</span> . magit-status))
</pre>
</div>

<p>
Following error will reported when using magit to commit changes:
</p>

<blockquote>
<p>
server-ensure-safe-dir: The directory ‘~/.emacs.d/server’ is unsafe
</p>
</blockquote>

<p>
The solution is to change the owner of <code>~/.emacs.d/server</code> <sup><a id="fnr.10" class="footref" href="#fn.10">10</a></sup>
</p>

<blockquote>
<p>
Click R-mouse on ~/.emacs.d/server and select “Properties” (last item in
menu). From Properties select the Tab “Security” and then select the button
“Advanced”. Then select the Tab “Owner” and change the owner from
<code>“Administrators (\Administrators)”</code> into <code>“ (\”</code>. Now the server code will accept
this directory as secure because you are the owner.
</p>
</blockquote>
</div>
</div>

<div id="outline-container-org74183d9" class="outline-3">
<h3 id="org74183d9"><span class="section-number-3">20.4</span> Code folding</h3>
<div class="outline-text-3" id="text-20-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">yafolding</span>
  <span style="color: #7F0055; font-weight: bold;">:bind</span> ((<span style="color: #2A00FF;">"C-c h"</span> . yafolding-hide-element)
         (<span style="color: #2A00FF;">"C-c s"</span> . yafolding-show-element)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org8feb5cf" class="outline-3">
<h3 id="org8feb5cf"><span class="section-number-3">20.5</span> static code analysis</h3>
<div class="outline-text-3" id="text-20-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">flycheck</span>
  <span style="color: #7F0055; font-weight: bold;">:commands</span> (global-flycheck-mode))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org6c0cabd" class="outline-2">
<h2 id="org6c0cabd"><span class="section-number-2">21</span> Programming Language</h2>
<div class="outline-text-2" id="text-21">
</div>
<div id="outline-container-org97d1a50" class="outline-3">
<h3 id="org97d1a50"><span class="section-number-3">21.1</span> C</h3>
<div class="outline-text-3" id="text-21-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">cc-mode</span>
    <span style="color: #7F0055; font-weight: bold;">:ensure</span> nil
    <span style="color: #7F0055; font-weight: bold;">:config</span>
    (add-to-list 'auto-mode-alist '(<span style="color: #2A00FF;">"\\.c\\'"</span> . c-mode))
    (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">ggtags</span>)
    (add-hook 'c-mode-hook 'ggtags-mode)
    (add-hook 'c++-mode-hook 'ggtags-mode)

    (add-hook 'c-mode-common-hook
              (<span style="color: #7F0055; font-weight: bold;">lambda</span> ()
                <span style="color: #3F7F5F;">;;</span><span style="color: #3F7F5F;">(c-set-style "gnu")</span>
                (c-toggle-auto-newline 0)
                (c-toggle-auto-hungry-state 0)
                (c-toggle-syntactic-indentation 1)
                <span style="color: #3F7F5F;">;;</span><span style="color: #3F7F5F;">(highlight-indentation-mode 1)</span>
                (which-function-mode 1)
                (local-set-key <span style="color: #2A00FF;">"\C-co"</span> 'ff-find-other-file)
                (<span style="color: #7F0055; font-weight: bold;">setq</span> c-basic-offset 4))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org29bd4a7" class="outline-3">
<h3 id="org29bd4a7"><span class="section-number-3">21.2</span> C#</h3>
<div class="outline-text-3" id="text-21-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">csharp-mode</span>
    <span style="color: #7F0055; font-weight: bold;">:mode</span> (<span style="color: #2A00FF;">"\\.cs\\'"</span> . csharp-mode))
</pre>
</div>
</div>
</div>


<div id="outline-container-orgfe32866" class="outline-3">
<h3 id="orgfe32866"><span class="section-number-3">21.3</span> Clojure</h3>
<div class="outline-text-3" id="text-21-3">
<p>
Clojure<sup><a id="fnr.11" class="footref" href="#fn.11">11</a></sup> is a lisp over JVM. Emm, I like it.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">paredit</span>
  <span style="color: #7F0055; font-weight: bold;">:bind</span> ((<span style="color: #2A00FF;">"C-M-w"</span> . paredit-copy-as-kill)
         (<span style="color: #2A00FF;">"M-&lt;right&gt;"</span> . paredit-forward)
         (<span style="color: #2A00FF;">"M-&lt;left&gt;"</span> . paredit-backward))
  <span style="color: #7F0055; font-weight: bold;">:commands</span> (enable-paredit-mode))

(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">clojure-mode</span>
  <span style="color: #7F0055; font-weight: bold;">:mode</span> (<span style="color: #2A00FF;">"\\.clj\\'"</span> . clojure-mode)
  <span style="color: #7F0055; font-weight: bold;">:config</span>
  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">cider</span>)
  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">company</span>)
  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">flycheck</span>)
  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">flycheck-clj-kondo</span>)
  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">clojure-snippets</span>)
  (eval-after-load 'company
    '(<span style="color: #7F0055; font-weight: bold;">progn</span>
       (delete 'company-capf company-backends)
       (add-to-list 'company-backends 'company-capf)))
  (add-hook 'cider-repl-mode-hook #'company-mode)
  (add-hook 'cider-mode-hook #'company-mode)
  (add-hook 'clojure-mode-hook #'cider-mode)
  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">clojure-mode-extra-font-locking</span>)
  (add-to-list 'auto-mode-alist '(<span style="color: #2A00FF;">"\\.</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">(</span><span style="color: #2A00FF;">clj</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">|</span><span style="color: #2A00FF;">dtm</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">|</span><span style="color: #2A00FF;">edn</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">)</span><span style="color: #2A00FF;">\\'"</span> . clojure-mode))
  (add-to-list 'auto-mode-alist '(<span style="color: #2A00FF;">"\\.cljc\\'"</span> . clojurec-mode))
  (add-to-list 'auto-mode-alist '(<span style="color: #2A00FF;">"\\.cljs\\'"</span> . clojurescript-mode))
  (add-to-list 'auto-mode-alist '(<span style="color: #2A00FF;">"</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">(?:</span><span style="color: #2A00FF;">build</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">|</span><span style="color: #2A00FF;">profile</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">)</span><span style="color: #2A00FF;">\\.boot\\'"</span> . clojure-mode))
  (add-hook 'clojure-mode-hook
            (<span style="color: #7F0055; font-weight: bold;">lambda</span> ()
              (enable-paredit-mode))))

(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">clojurescript-mode</span>
  <span style="color: #7F0055; font-weight: bold;">:mode</span> (<span style="color: #2A00FF;">"\\.cljs\\'"</span> . clojurescript-mode)
  <span style="color: #7F0055; font-weight: bold;">:ensure</span> clojure-mode
  <span style="color: #7F0055; font-weight: bold;">:config</span>
  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">cider</span>)
  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">company</span>)
  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">flycheck</span>)
  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">flycheck-clj-kondo</span>)
  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">clojure-snippets</span>)
  (eval-after-load 'company
    '(<span style="color: #7F0055; font-weight: bold;">progn</span>
       (delete 'company-capf company-backends)
       (add-to-list 'company-backends 'company-capf)))
  (add-hook 'cider-repl-mode-hook #'company-mode)
  (add-hook 'cider-mode-hook #'company-mode)
  (add-hook 'clojurescript-mode-hook #'cider-mode)
  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">clojure-mode-extra-font-locking</span>)
  (add-to-list 'auto-mode-alist '(<span style="color: #2A00FF;">"\\.cljc\\'"</span> . clojurec-mode))
  (add-to-list 'auto-mode-alist '(<span style="color: #2A00FF;">"\\.cljs\\'"</span> . clojurescript-mode))
  (add-hook 'clojure-mode-hook
            (<span style="color: #7F0055; font-weight: bold;">lambda</span> ()
              (enable-paredit-mode))))
</pre>
</div>
</div>

<div id="outline-container-org0bb7d2a" class="outline-4">
<h4 id="org0bb7d2a"><span class="section-number-4">21.3.1</span> clj-kondo</h4>
<div class="outline-text-4" id="text-21-3-1">
<p>
Install with npm:
</p>

<div class="org-src-container">
<pre class="src src-shell">npm install -g clj-kondo
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">flycheck-clj-kondo</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org721eaa3" class="outline-4">
<h4 id="org721eaa3"><span class="section-number-4">21.3.2</span> Cider</h4>
<div class="outline-text-4" id="text-21-3-2">
<p>
Cider<sup><a id="fnr.12" class="footref" href="#fn.12">12</a></sup> extends Emacs with support for interactive programming
in Clojure.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">cider</span>
  <span style="color: #7F0055; font-weight: bold;">:config</span>
  (<span style="color: #7F0055; font-weight: bold;">setq</span> nrepl-use-ssh-fallback-for-remote-hosts t)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> nrepl-sync-request-timeout 100)
  (<span style="color: #7F0055; font-weight: bold;">defun</span> <span style="color: #0000ff; font-weight: bold;">nrepl--ssh-tunnel-command</span> (ssh dir port)
    <span style="color: #2A00FF;">"Command string to open SSH tunnel to the host associated with DIR's PORT."</span>
    (<span style="color: #7F0055; font-weight: bold;">with-parsed-tramp-file-name</span> dir v
      <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">this abuses the -v option for ssh to get output when the port</span>
      <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">forwarding is set up, which is used to synchronise on, so that</span>
      <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">the port forwarding is up when we try to connect.</span>
      (format-spec
       <span style="color: #2A00FF;">"%s -v -N -L %p:localhost:%p %u'%h' %x"</span>
       `((?s . ,ssh)
         (?p . ,port)
         (?h . ,v-host)
         (?u . ,(<span style="color: #7F0055; font-weight: bold;">if</span> v-user (format <span style="color: #2A00FF;">"-l '%s' "</span> v-user) <span style="color: #2A00FF;">""</span>))
         (?x . <span style="color: #2A00FF;">"-o \"ProxyCommand=nc -X connect -x 127.0.0.1:1080 %h %p\""</span>)))))
  )
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">ob-clojure</span>
  <span style="color: #7F0055; font-weight: bold;">:ensure</span> org
  <span style="color: #7F0055; font-weight: bold;">:config</span>
  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">clojure-mode</span>)
  (<span style="color: #7F0055; font-weight: bold;">require</span> '<span style="color: #110099;">ob-clojure</span>)
  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">cider</span>)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> org-babel-clojure-backend 'cider)
  (<span style="color: #7F0055; font-weight: bold;">defun</span> <span style="color: #0000ff; font-weight: bold;">org-babel-expand-body:clojure</span> (body params)
    <span style="color: #2A00FF;">"Expand BODY according to PARAMS, return the expanded body."</span>
    (<span style="color: #7F0055; font-weight: bold;">let*</span> ((vars (org-babel--get-vars params))
           (ns (<span style="color: #7F0055; font-weight: bold;">or</span> (cdr (assq <span style="color: #7F0055; font-weight: bold;">:ns</span> params))
                   (org-babel-clojure-cider-current-ns)))
           (result-params (cdr (assq <span style="color: #7F0055; font-weight: bold;">:result-params</span> params)))
           (print-level nil)
           (print-length nil)
           (body (org-trim
                  (concat
                   <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">Source block specified namespace :ns.</span>
                   (<span style="color: #7F0055; font-weight: bold;">and</span> (cdr (assq <span style="color: #7F0055; font-weight: bold;">:ns</span> params)) (format <span style="color: #2A00FF;">"(ns %s)\n"</span> ns))
                   <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">Variables binding.</span>
                   (<span style="color: #7F0055; font-weight: bold;">if</span> (null vars) (org-trim body)
                     (format <span style="color: #2A00FF;">"(let [%s]\n%s)"</span>
                             (mapconcat
                              (<span style="color: #7F0055; font-weight: bold;">lambda</span> (var)
                                (format <span style="color: #2A00FF;">"%S (quote %S)"</span> (car var) (cdr var)))
                              vars
                              <span style="color: #2A00FF;">"\n      "</span>)
                             body))))))
      (<span style="color: #7F0055; font-weight: bold;">if</span> (<span style="color: #7F0055; font-weight: bold;">or</span> (member <span style="color: #2A00FF;">"code"</span> result-params)
              (member <span style="color: #2A00FF;">"pp"</span> result-params))
          (format <span style="color: #2A00FF;">"(print (str (do %s)))"</span> body)
        body))))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org73c4ddd" class="outline-3">
<h3 id="org73c4ddd"><span class="section-number-3">21.4</span> Python</h3>
<div class="outline-text-3" id="text-21-4">
<p>
Python development configuration is quite easy. <code>elpy</code> <sup><a id="fnr.13" class="footref" href="#fn.13">13</a></sup> is used here:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">elpy</span>
    <span style="color: #7F0055; font-weight: bold;">:config</span>
    (elpy-enable))

  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">python</span>
    <span style="color: #7F0055; font-weight: bold;">:ensure</span> nil
    <span style="color: #7F0055; font-weight: bold;">:mode</span> (<span style="color: #2A00FF;">"\\.py\\'"</span> . python-mode)
    <span style="color: #7F0055; font-weight: bold;">:interpreter</span> (<span style="color: #2A00FF;">"python"</span> . python-mode)
    <span style="color: #7F0055; font-weight: bold;">:config</span>
    (add-hook 'python-mode-hook
              (<span style="color: #7F0055; font-weight: bold;">lambda</span> ()
                (<span style="color: #7F0055; font-weight: bold;">setq</span> yas-indent-line nil)))
    (add-to-list 'python-shell-completion-native-disabled-interpreters <span style="color: #2A00FF;">"python"</span>))

  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">company-jedi</span>
    <span style="color: #7F0055; font-weight: bold;">:config</span>
    (<span style="color: #7F0055; font-weight: bold;">setq</span> elpy-rpc-backend <span style="color: #2A00FF;">"jedi"</span>)
    (eval-after-load 'company
      '(add-to-list 'company-backends 'company-jedi)))
</pre>
</div>

<p>
Following <code>python</code> package is required according to <code>elpy</code> mannual:
</p>

<div class="org-src-container">
<pre class="src src-shell">pip install rope
pip install jedi
<span style="color: #3F7F5F;"># </span><span style="color: #3F7F5F;">flake8 for code checks</span>
pip install flake8
<span style="color: #3F7F5F;"># </span><span style="color: #3F7F5F;">importmagic for automatic imports</span>
pip install importmagic
<span style="color: #3F7F5F;"># </span><span style="color: #3F7F5F;">and autopep8 for automatic PEP8 formatting</span>
pip install autopep8
<span style="color: #3F7F5F;"># </span><span style="color: #3F7F5F;">and yapf for code formatting</span>
pip install yapf
<span style="color: #3F7F5F;"># </span><span style="color: #3F7F5F;">install virtualenv for jedi</span>
pip install virtualenv
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcccf34d" class="outline-3">
<h3 id="orgcccf34d"><span class="section-number-3">21.5</span> Swift</h3>
<div class="outline-text-3" id="text-21-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">swift-mode</span>
    <span style="color: #7F0055; font-weight: bold;">:mode</span> (<span style="color: #2A00FF;">"\\.swift\\'"</span> . swift-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-org157cb4b" class="outline-3">
<h3 id="org157cb4b"><span class="section-number-3">21.6</span> Go lang</h3>
<div class="outline-text-3" id="text-21-6">
<p>
Open <code>.go</code> file with go-mode.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">go-mode</span>
    <span style="color: #7F0055; font-weight: bold;">:mode</span> (<span style="color: #2A00FF;">"\\.go\\'"</span> . go-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf7ea5c6" class="outline-3">
<h3 id="orgf7ea5c6"><span class="section-number-3">21.7</span> Docker file</h3>
<div class="outline-text-3" id="text-21-7">
<p>
Some dockerfile is not end with <code>.dockerfile</code>, so lets guess:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">dockerfile-mode</span>
    <span style="color: #7F0055; font-weight: bold;">:mode</span> (<span style="color: #2A00FF;">"\\dockerfile\\'"</span> . dockerfile-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-org75a6f14" class="outline-3">
<h3 id="org75a6f14"><span class="section-number-3">21.8</span> Emacs lisp</h3>
<div class="outline-text-3" id="text-21-8">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">elisp-mode</span>
  <span style="color: #7F0055; font-weight: bold;">:ensure</span> nil
  <span style="color: #7F0055; font-weight: bold;">:mode</span> (<span style="color: #2A00FF;">"\\.el\\'"</span> . emacs-lisp-mode)
  <span style="color: #7F0055; font-weight: bold;">:config</span>
  (<span style="color: #7F0055; font-weight: bold;">define-derived-mode</span> <span style="color: #0000ff; font-weight: bold;">lisp-interaction-mode</span> emacs-lisp-mode <span style="color: #2A00FF;">"&#955;"</span>)
  (global-company-mode t)
  (global-flycheck-mode t)
  (eval-after-load 'company
    '(add-to-list 'company-backends 'company-elisp))
  (add-hook 'emacs-lisp-mode-hook
            (<span style="color: #7F0055; font-weight: bold;">lambda</span> ()
              (enable-paredit-mode))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org518879d" class="outline-3">
<h3 id="org518879d"><span class="section-number-3">21.9</span> AutoHotKey</h3>
<div class="outline-text-3" id="text-21-9">
<p>
<code>ahk-mode</code> developed by Rich Alesi<sup><a id="fnr.14" class="footref" href="#fn.14">14</a></sup>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">ahk-mode</span>
    <span style="color: #7F0055; font-weight: bold;">:mode</span> (<span style="color: #2A00FF;">"\\.ahk\\'"</span> . ahk-mode))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgf79a5dd" class="outline-2">
<h2 id="orgf79a5dd"><span class="section-number-2">22</span> Calendar</h2>
<div class="outline-text-2" id="text-22">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">if</span> (not (boundp 'kimim/file-diary))
      (<span style="color: #7F0055; font-weight: bold;">defvar</span> <span style="color: #000000;">kimim/file-diary</span> (concat kimim/path-sync-emacs <span style="color: #2A00FF;">"diary"</span>)))
  (<span style="color: #7F0055; font-weight: bold;">if</span> (not (file-exists-p kimim/file-diary))
      (write-region <span style="color: #2A00FF;">""</span> nil kimim/file-diary))
  (<span style="color: #7F0055; font-weight: bold;">setq</span> diary-file kimim/file-diary)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> calendar-latitude +30.16)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> calendar-longitude +120.12)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> calendar-location-name <span style="color: #2A00FF;">"Hangzhou"</span>)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> calendar-remove-frame-by-deleting t)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> calendar-week-start-day 1)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> holiday-christian-holidays nil)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> holiday-hebrew-holidays nil)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> holiday-islamic-holidays nil)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> holiday-solar-holidays nil)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> holiday-bahai-holidays nil)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> holiday-general-holidays
        '((holiday-fixed 1 1 <span style="color: #2A00FF;">"&#20803;&#26086;"</span>)
          (holiday-float 5 0 2 <span style="color: #2A00FF;">"&#29238;&#35242;&#31680;"</span>)
          (holiday-float 6 0 3 <span style="color: #2A00FF;">"&#27597;&#35242;&#31680;"</span>)))
  (<span style="color: #7F0055; font-weight: bold;">setq</span> calendar-mark-diary-entries-flag t)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> calendar-mark-holidays-flag nil)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> calendar-view-holidays-initially-flag nil)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> chinese-calendar-celestial-stem
        [<span style="color: #2A00FF;">"&#30002;"</span> <span style="color: #2A00FF;">"&#20057;"</span> <span style="color: #2A00FF;">"&#19993;"</span> <span style="color: #2A00FF;">"&#19969;"</span> <span style="color: #2A00FF;">"&#25098;"</span> <span style="color: #2A00FF;">"&#24049;"</span> <span style="color: #2A00FF;">"&#24218;"</span> <span style="color: #2A00FF;">"&#36763;"</span> <span style="color: #2A00FF;">"&#22764;"</span> <span style="color: #2A00FF;">"&#30328;"</span>])
  (<span style="color: #7F0055; font-weight: bold;">setq</span> chinese-calendar-terrestrial-branch
        [<span style="color: #2A00FF;">"&#23376;"</span> <span style="color: #2A00FF;">"&#19985;"</span> <span style="color: #2A00FF;">"&#23493;"</span> <span style="color: #2A00FF;">"&#21359;"</span> <span style="color: #2A00FF;">"&#36784;"</span> <span style="color: #2A00FF;">"&#24051;"</span> <span style="color: #2A00FF;">"&#21320;"</span> <span style="color: #2A00FF;">"&#26410;"</span> <span style="color: #2A00FF;">"&#30003;"</span> <span style="color: #2A00FF;">"&#37193;"</span> <span style="color: #2A00FF;">"&#25100;"</span> <span style="color: #2A00FF;">"&#20133;"</span>])
</pre>
</div>
</div>
</div>

<div id="outline-container-org0a6138e" class="outline-2">
<h2 id="org0a6138e"><span class="section-number-2">23</span> Orgmode</h2>
<div class="outline-text-2" id="text-23">
</div>
<div id="outline-container-org2e84216" class="outline-3">
<h3 id="org2e84216"><span class="section-number-3">23.1</span> orgalist</h3>
<div class="outline-text-3" id="text-23-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">orgalist</span>
    <span style="color: #7F0055; font-weight: bold;">:commands</span> (orgalist-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-org4fea600" class="outline-3">
<h3 id="org4fea600"><span class="section-number-3">23.2</span> org general setting</h3>
<div class="outline-text-3" id="text-23-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">path and system environment setting for orgmode</span>
  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">org</span>
    <span style="color: #7F0055; font-weight: bold;">:bind</span>
    (<span style="color: #2A00FF;">"C-c a"</span> . org-agenda)
    (<span style="color: #2A00FF;">"C-c b"</span> . org-iswitchb)
    (<span style="color: #2A00FF;">"C-c c"</span> . org-capture)
    (<span style="color: #2A00FF;">"C-c l"</span> . org-store-link)
    (<span style="color: #2A00FF;">"C-c  &#65281;"</span> . org-time-stamp-inactive)
    (<span style="color: #2A00FF;">"C-c  &#12290;"</span> . org-time-stamp)
    <span style="color: #7F0055; font-weight: bold;">:config</span>
    <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">(org-roam-mode t)</span>
    (org-download-enable)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-support-shift-select t)
    <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">no empty line after collapsed</span>
    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-cycle-separator-lines 0)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-src-fontify-natively t)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-src-preserve-indentation t)
    (<span style="color: #7F0055; font-weight: bold;">if</span> window-system
        (<span style="color: #7F0055; font-weight: bold;">setq</span> org-startup-indented t)
      (<span style="color: #7F0055; font-weight: bold;">setq</span> org-startup-indented nil))
    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-image-actual-width 600))
</pre>
</div>
</div>
</div>

<div id="outline-container-org124cfea" class="outline-3">
<h3 id="org124cfea"><span class="section-number-3">23.3</span> org for writing</h3>
<div class="outline-text-3" id="text-23-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">org-download</span>
  <span style="color: #7F0055; font-weight: bold;">:commands</span> (org-download-enable)
  <span style="color: #7F0055; font-weight: bold;">:config</span>
  (<span style="color: #7F0055; font-weight: bold;">setq</span> org-download-timestamp <span style="color: #2A00FF;">""</span>)
  (<span style="color: #7F0055; font-weight: bold;">setq-default</span> org-download-image-dir <span style="color: #2A00FF;">"./images"</span>)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> org-download-method 'directory)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> org-download-heading nil)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> org-startup-with-inline-images nil)

  (<span style="color: #7F0055; font-weight: bold;">defun</span> <span style="color: #0000ff; font-weight: bold;">kimim/org-download-annotate</span> (link)
    <span style="color: #2A00FF;">"Annotate LINK with the time of download."</span>
    (format <span style="color: #2A00FF;">"#+NAME: fig:%s\n#+CAPTION: %s\n"</span>
            (file-name-base link) (file-name-base link)))
  (<span style="color: #7F0055; font-weight: bold;">setq</span> org-download-annotate-function #'kimim/org-download-annotate)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> org-download-display-inline-images nil)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> image-file-name-extensions
        (<span style="color: #7F0055; font-weight: bold;">quote</span>
         (<span style="color: #2A00FF;">"png"</span> <span style="color: #2A00FF;">"jpeg"</span> <span style="color: #2A00FF;">"jpg"</span> <span style="color: #2A00FF;">"gif"</span> <span style="color: #2A00FF;">"tiff"</span> <span style="color: #2A00FF;">"tif"</span> <span style="color: #2A00FF;">"xbm"</span>
          <span style="color: #2A00FF;">"xpm"</span> <span style="color: #2A00FF;">"pbm"</span> <span style="color: #2A00FF;">"pgm"</span> <span style="color: #2A00FF;">"ppm"</span> <span style="color: #2A00FF;">"pnm"</span> <span style="color: #2A00FF;">"svg"</span> <span style="color: #2A00FF;">"pdf"</span> <span style="color: #2A00FF;">"bmp"</span>)))
  (<span style="color: #7F0055; font-weight: bold;">defun</span> <span style="color: #0000ff; font-weight: bold;">org-download--dir-2</span> () <span style="color: #2A00FF;">"."</span>))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">org</span>
    <span style="color: #7F0055; font-weight: bold;">:config</span>
    (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">org-download</span>)
    (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">pangu-spacing</span>)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-hide-leading-stars t)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-footnote-auto-adjust t)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-footnote-define-inline nil)
    (define-key org-mode-map (kbd <span style="color: #2A00FF;">"C-c C-x h"</span>) (<span style="color: #7F0055; font-weight: bold;">lambda</span> ()
                                                 (<span style="color: #7F0055; font-weight: bold;">interactive</span>)
                                                 (insert <span style="color: #2A00FF;">"^{()}"</span>)
                                                 (backward-char 2)))
    (define-key org-mode-map (kbd <span style="color: #2A00FF;">"C-c C-x l"</span>) (<span style="color: #7F0055; font-weight: bold;">lambda</span> ()
                                                 (<span style="color: #7F0055; font-weight: bold;">interactive</span>)
                                                 (insert <span style="color: #2A00FF;">"_{}"</span>)
                                                 (backward-char 1))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgedd940a" class="outline-3">
<h3 id="orgedd940a"><span class="section-number-3">23.4</span> org with source code</h3>
<div class="outline-text-3" id="text-23-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">org</span>
    <span style="color: #7F0055; font-weight: bold;">:config</span>
    (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">poly-org</span>)
    (org-babel-do-load-languages
     'org-babel-load-languages
     '((clojure . t)
       (shell . t)
       (python . t)))
    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-src-window-setup 'current-window)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-src-fontify-natively t)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-src-preserve-indentation t)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-edit-src-content-indentation 0)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-confirm-babel-evaluate nil)
    (add-hook 'org-babel-after-execute-hook 'org-display-inline-images))
</pre>
</div>

<p>
Polymode <sup><a id="fnr.15" class="footref" href="#fn.15">15</a></sup> is a framework for multiple major modes (MMM) inside a single
Emacs buffer. It is comfortable to enable it during literating program.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">poly-org</span>
  <span style="color: #7F0055; font-weight: bold;">:ensure</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org5ece3a3" class="outline-3">
<h3 id="org5ece3a3"><span class="section-number-3">23.5</span> org exporting</h3>
<div class="outline-text-3" id="text-23-5">
<p>
When exporting, do not export with author and date.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">org</span>
    <span style="color: #7F0055; font-weight: bold;">:bind</span> (<span style="color: #2A00FF;">"C-c C-'"</span> . org-insert-structure-template)
    <span style="color: #7F0055; font-weight: bold;">:config</span>
    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-export-allow-BIND t)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-export-creator-string <span style="color: #2A00FF;">""</span>)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-export-html-validation-link nil)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-export-with-sub-superscripts '{})
    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-export-with-author nil)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-export-with-date nil))
</pre>
</div>
</div>

<div id="outline-container-org597e278" class="outline-4">
<h4 id="org597e278"><span class="section-number-4">23.5.1</span> org to pdf</h4>
<div class="outline-text-4" id="text-23-5-1">
<p>
LaTeX is required to convert <code>org-mode</code> to PDF.
</p>

<p>
For MacOS:
</p>

<div class="org-src-container">
<pre class="src src-shell">brew cask install mactex-no-gui
</pre>
</div>

<p>
For Windows, download and install CTEX from <a href="http://www.ctex.org">http://www.ctex.org</a>
</p>

<div class="org-src-container">
<pre class="src src-shell">apt-cyg install texlive-collection-xetex texlive-collection-latex texlive-collection-fontsrecommended
</pre>
</div>

<p>
For Linux:
</p>

<p>
Download texlive install pacakge from: <a href="http://mirror.ctan.org/systems/texlive/tlnet/install-tl-unx.tar.gz">http://mirror.ctan.org/systems/texlive/tlnet/install-tl-unx.tar.gz</a>
</p>

<div class="org-src-container">
<pre class="src src-shell">tar zxvf install-tl-unx.tar.gz
<span style="color: #7F0055; font-weight: bold;">cd</span> install-tl-20200908/
sudo ./install-tl
</pre>
</div>

<p>
Then for all the OS platforms, use <code>tlmgr</code> to install user level tex packages:
</p>

<div class="org-src-container">
<pre class="src src-shell">tlmgr init-usertree
tlmgr --usermode install ctex titlesec enumitem ms fontspec abstract <span style="color: #2A00FF;">\</span>
                         zhnumber fandol lastpage pdftexcmds infwarerr <span style="color: #2A00FF;">\</span>
                         minted fvextra etoolbox fancyvrb upquote <span style="color: #2A00FF;">\</span>
                         lineno catchfile xstring framed float <span style="color: #2A00FF;">\</span>
                         grffile wrapfig ulem lettrine minifp <span style="color: #2A00FF;">\</span>
                         capt-of xcolor svg koma-script trimspaces <span style="color: #2A00FF;">\</span>
                         titling layaureo parskip extsizes pgf <span style="color: #2A00FF;">\</span>
                         moderncv microtype
fmtutil-sys --all
</pre>
</div>

<p>
To export <code>org-mode</code> to PDF, with code style highlight, you need to install
<code>python</code> and <code>pygments</code>. Because <code>pygmentize</code> from <code>pygments</code> is used to
generate <code>latex</code> markups for font highlighting.
</p>

<p>
For MacOS, the OS shipped <code>python2.7</code> does not accompanied with <code>pip</code> package
management script. So you need to install <code>pip</code>, and then add <code>pygments</code>,
acc. <a href="https://pip.pypa.io/en/stable/installing/">https://pip.pypa.io/en/stable/installing/</a> , <code>pygmentize</code> will be installed
under <code>$HOME/Library/Python/2.7/bin</code>, which is added to <code>exec-path</code> and <code>PATH</code>
in section <a href="#orga788bd8">5.1</a>.
</p>

<div class="org-src-container">
<pre class="src src-shell">curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py
python get-pip.py
</pre>
</div>

<p>
Get <code>pygments</code> with <code>pip</code>:
</p>

<div class="org-src-container">
<pre class="src src-shell">pip install pygments
</pre>
</div>

<p>
For Ubuntu Linux:
</p>

<div class="org-src-container">
<pre class="src src-shell">sudo apt install python3-pygments
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">ox-latex</span>
    <span style="color: #7F0055; font-weight: bold;">:ensure</span> org
    <span style="color: #7F0055; font-weight: bold;">:bind</span> (<span style="color: #2A00FF;">"&lt;C-f7&gt;"</span> . org-latex-export-to-pdf)
    <span style="color: #7F0055; font-weight: bold;">:commands</span> (org-latex-publish-to-pdf)
    <span style="color: #7F0055; font-weight: bold;">:config</span>
    (<span style="color: #7F0055; font-weight: bold;">require</span> '<span style="color: #110099;">ox-latex</span>)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-latex-listings 'minted)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-latex-minted-options
    '((<span style="color: #2A00FF;">"frame"</span> <span style="color: #2A00FF;">"single"</span>) (<span style="color: #2A00FF;">"fontsize"</span> <span style="color: #2A00FF;">"\\small"</span>)))

    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-latex-pdf-process
          `(,(<span style="color: #7F0055; font-weight: bold;">let</span> ((ref (concat kimim/path-ref <span style="color: #2A00FF;">"references.bib"</span>)))
               (<span style="color: #7F0055; font-weight: bold;">if</span> (file-exists-p ref)
                   (concat <span style="color: #2A00FF;">"cp -f \""</span> ref <span style="color: #2A00FF;">"\" ."</span>)
                 <span style="color: #2A00FF;">""</span>))
            <span style="color: #2A00FF;">"xelatex -shell-escape %f"</span>
            <span style="color: #2A00FF;">"bibtex %b"</span>
            <span style="color: #2A00FF;">"xelatex -shell-escape %f"</span>
            <span style="color: #2A00FF;">"xelatex -shell-escape %f"</span>
            <span style="color: #2A00FF;">"mv -f references.bib references.back.bib"</span>))

    <span style="color: #3F7F5F;">;;; </span><span style="color: #3F7F5F;">Nicolas Goaziou, http://article.gmane.org/gmane.emacs.orgmode/67692</span>
    (<span style="color: #7F0055; font-weight: bold;">defun</span> <span style="color: #0000ff; font-weight: bold;">org-latex-ignore-heading-filter-headline</span> (headline backend info)
      <span style="color: #2A00FF;">"Strip headline from HEADLINE. Ignore BACKEND and INFO."</span>
      (<span style="color: #7F0055; font-weight: bold;">when</span> (<span style="color: #7F0055; font-weight: bold;">and</span> (org-export-derived-backend-p backend 'latex)
                 (string-match <span style="color: #2A00FF;">"\\`.*ignoreheading.*\n"</span> headline))
        (replace-match <span style="color: #2A00FF;">""</span> nil nil headline)))
    (add-to-list 'org-export-filter-headline-functions
                 'org-latex-ignore-heading-filter-headline)

    <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">most of the time, I do not need table of contents</span>
    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-latex-toc-command nil)
    <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">https://www.tuicool.com/articles/ZnAnym</span>
    <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">remove error: ! LaTeX Error: Command \nobreakspace unavailable in encoding T1.</span>
    <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">add: \DeclareRobustCommand\nobreakspace{\leavevmode\nobreak\ }</span>
    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-latex-classes
          '((<span style="color: #2A00FF;">"biz-report"</span>
             <span style="color: #2A00FF;">"\\documentclass[15pt]{ctexart}</span>
<span style="color: #2A00FF;">  \\usepackage{geometry}</span>
<span style="color: #2A00FF;">  \\usepackage{titlesec}</span>
<span style="color: #2A00FF;">  \\usepackage{titling}</span>
<span style="color: #2A00FF;">  \\posttitle{\\par\\end{center}\\vskip -60pt}</span>
<span style="color: #2A00FF;">  \\let\\titleoriginal\\title</span>
<span style="color: #2A00FF;">  \\renewcommand{\\title}[1]{</span>
<span style="color: #2A00FF;">    \\titleoriginal{\\LARGE{\\heiti{#1}}\\vspace{-4em}}</span>
<span style="color: #2A00FF;">    }</span>
<span style="color: #2A00FF;">  \\let\\maketitleorig\\maketitle</span>
<span style="color: #2A00FF;">  \\renewcommand{\\maketitle}{</span>
<span style="color: #2A00FF;">    \\maketitleorig</span>
<span style="color: #2A00FF;">    \\Large</span>
<span style="color: #2A00FF;">    }</span>
<span style="color: #2A00FF;">  \\setlength{\\droptitle}{-60pt}</span>
<span style="color: #2A00FF;">  \\usepackage{enumitem}</span>
<span style="color: #2A00FF;">  \\usepackage{abstract}</span>
<span style="color: #2A00FF;">  \\renewcommand{\\abstractname}{&#25688;&#35201;}</span>
<span style="color: #2A00FF;">  \\renewcommand\\refname{&#21442;&#32771;&#25991;&#29486;}</span>
<span style="color: #2A00FF;">  \\usepackage{fancyhdr, lastpage}</span>
<span style="color: #2A00FF;">  \\fancypagestyle{plain}{</span>
<span style="color: #2A00FF;">      \\fancyhf{}</span>
<span style="color: #2A00FF;">      \\fancyfoot[C]{{\\thepage}/\\pageref*{LastPage}}</span>
<span style="color: #2A00FF;">      \\renewcommand{\\headrulewidth}{0pt}</span>
<span style="color: #2A00FF;">  }</span>
<span style="color: #2A00FF;">  \\usepackage{hyperref}</span>
<span style="color: #2A00FF;">  \\hypersetup{hidelinks}</span>
<span style="color: #2A00FF;">  \\hypersetup{colorlinks = true, urlcolor = blue, linkcolor = blue, citecolor = blue}</span>
<span style="color: #2A00FF;">  \\pagestyle{plain}</span>
<span style="color: #2A00FF;">  \\setlist[1]{labelindent=\\parindent,nosep,leftmargin= *}</span>
<span style="color: #2A00FF;">  \\geometry{a4paper,scale=0.8}</span>
<span style="color: #2A00FF;">  \\geometry{a4paper,left=2.5cm,right=2.5cm,top=3cm,bottom=3cm}</span>
<span style="color: #2A00FF;">  \\setlength{\\baselineskip}{20pt}</span>
<span style="color: #2A00FF;">  \\setlength{\\parskip}{5pt}</span>
<span style="color: #2A00FF;">  \\DeclareRobustCommand\\nobreakspace{\\leavevmode\\nobreak\\ }"</span>
             (<span style="color: #2A00FF;">"\\section{%s}"</span> . <span style="color: #2A00FF;">"\\section*{%s}"</span>)
             (<span style="color: #2A00FF;">"\\subsection{%s}"</span> . <span style="color: #2A00FF;">"\\subsection*{%s}"</span>)
             (<span style="color: #2A00FF;">"\\subsubsection{%s}"</span> . <span style="color: #2A00FF;">"\\subsubsection*{%s}"</span>)
             (<span style="color: #2A00FF;">"\\paragraph{%s}"</span> . <span style="color: #2A00FF;">"\\paragraph*{%s}"</span>)
             (<span style="color: #2A00FF;">"\\subparagraph{%s}"</span> . <span style="color: #2A00FF;">"\\subparagraph*{%s}"</span>))

             (<span style="color: #2A00FF;">"cn-article"</span>
             <span style="color: #2A00FF;">"\\documentclass[a4paper,UTF8]{ctexart}</span>
<span style="color: #2A00FF;">  \\usepackage{geometry}</span>
<span style="color: #2A00FF;">  \\usepackage{titlesec}</span>
<span style="color: #2A00FF;">  \\usepackage{enumitem}</span>
<span style="color: #2A00FF;">  \\usepackage{abstract}</span>
<span style="color: #2A00FF;">  \\renewcommand{\\abstractname}{&#25688;&#35201;}</span>
<span style="color: #2A00FF;">  \\renewcommand\\refname{&#21442;&#32771;&#25991;&#29486;}</span>
<span style="color: #2A00FF;">  \\CTEXsetup[format={\\Large\\bfseries}]{section}</span>
<span style="color: #2A00FF;">  \\renewcommand\\thesection{\\chinese{section}&#12289;}</span>
<span style="color: #2A00FF;">  \\renewcommand\\thesubsection{\\arabic{section}.\\arabic{subsection}.}</span>
<span style="color: #2A00FF;">  \\renewcommand\\thesubsubsection{\\arabic{section}.\\arabic{subsection}.\\arabic{subsubsection}}</span>
<span style="color: #2A00FF;">  \\usepackage{fancyhdr, lastpage}</span>
<span style="color: #2A00FF;">  \\fancypagestyle{plain}{</span>
<span style="color: #2A00FF;">      \\fancyhf{}</span>
<span style="color: #2A00FF;">      \\fancyfoot[C]{{\\thepage}/\\pageref*{LastPage}}</span>
<span style="color: #2A00FF;">      \\renewcommand{\\headrulewidth}{0pt}</span>
<span style="color: #2A00FF;">  }</span>
<span style="color: #2A00FF;">  \\usepackage{hyperref}</span>
<span style="color: #2A00FF;">  \\hypersetup{hidelinks}</span>
<span style="color: #2A00FF;">  \\hypersetup{colorlinks = true, urlcolor = blue, linkcolor = blue, citecolor = blue}</span>
<span style="color: #2A00FF;">  \\pagestyle{plain}</span>
<span style="color: #2A00FF;">  \\setlist[1]{labelindent=\\parindent,nosep,leftmargin= *}</span>
<span style="color: #2A00FF;">  \\geometry{a4paper,scale=0.8}</span>
<span style="color: #2A00FF;">  \\geometry{a4paper,left=2.5cm,right=2.5cm,top=3cm,bottom=3cm}</span>
<span style="color: #2A00FF;">  \\setlength{\\baselineskip}{20pt}</span>
<span style="color: #2A00FF;">  \\setlength{\\parskip}{5pt}</span>
<span style="color: #2A00FF;">  \\DeclareRobustCommand\\nobreakspace{\\leavevmode\\nobreak\\ }"</span>
             (<span style="color: #2A00FF;">"\\section{%s}"</span> . <span style="color: #2A00FF;">"\\section*{%s}"</span>)
             (<span style="color: #2A00FF;">"\\subsection{%s}"</span> . <span style="color: #2A00FF;">"\\subsection*{%s}"</span>)
             (<span style="color: #2A00FF;">"\\subsubsection{%s}"</span> . <span style="color: #2A00FF;">"\\subsubsection*{%s}"</span>)
             (<span style="color: #2A00FF;">"\\paragraph{%s}"</span> . <span style="color: #2A00FF;">"\\paragraph*{%s}"</span>)
             (<span style="color: #2A00FF;">"\\subparagraph{%s}"</span> . <span style="color: #2A00FF;">"\\subparagraph*{%s}"</span>))

            (<span style="color: #2A00FF;">"cn-book"</span>
             <span style="color: #2A00FF;">"\\documentclass[a4paper,UTF8]{ctexbook}</span>
<span style="color: #2A00FF;">  \\usepackage{enumitem}</span>
<span style="color: #2A00FF;">  \\usepackage{abstract}</span>
<span style="color: #2A00FF;">  \\renewcommand{\\abstractname}{&#25688;&#35201;}</span>
<span style="color: #2A00FF;">  \\renewcommand\\refname{&#21442;&#32771;&#25991;&#29486;}</span>
<span style="color: #2A00FF;">  \\usepackage{fancyhdr, lastpage}</span>
<span style="color: #2A00FF;">  \\fancypagestyle{plain}{</span>
<span style="color: #2A00FF;">      \\fancyhf{}</span>
<span style="color: #2A00FF;">      \\fancyfoot[C]{{\\thepage}/\\pageref*{LastPage}}</span>
<span style="color: #2A00FF;">      \\renewcommand{\\headrulewidth}{0pt}</span>
<span style="color: #2A00FF;">  }</span>
<span style="color: #2A00FF;">  \\usepackage{hyperref}</span>
<span style="color: #2A00FF;">  \\hypersetup{hidelinks}</span>
<span style="color: #2A00FF;">  \\hypersetup{colorlinks = true, urlcolor = blue, linkcolor = blue, citecolor = blue}</span>
<span style="color: #2A00FF;">  \\pagestyle{plain}</span>
<span style="color: #2A00FF;">  \\setlist[1]{labelindent=\\parindent,nosep,leftmargin= *}</span>
<span style="color: #2A00FF;">  \\setlength{\\baselineskip}{20pt}</span>
<span style="color: #2A00FF;">  \\setlength{\\parskip}{5pt}</span>
<span style="color: #2A00FF;">  \\DeclareRobustCommand\\nobreakspace{\\leavevmode\\nobreak\\ }"</span>
             (<span style="color: #2A00FF;">"\\section{%s}"</span> . <span style="color: #2A00FF;">"\\section*{%s}"</span>)
             (<span style="color: #2A00FF;">"\\subsection{%s}"</span> . <span style="color: #2A00FF;">"\\subsection*{%s}"</span>)
             (<span style="color: #2A00FF;">"\\subsubsection{%s}"</span> . <span style="color: #2A00FF;">"\\subsubsection*{%s}"</span>)
             (<span style="color: #2A00FF;">"\\paragraph{%s}"</span> . <span style="color: #2A00FF;">"\\paragraph*{%s}"</span>)
             (<span style="color: #2A00FF;">"\\subparagraph{%s}"</span> . <span style="color: #2A00FF;">"\\subparagraph*{%s}"</span>))

            (<span style="color: #2A00FF;">"article"</span>
             <span style="color: #2A00FF;">"\\documentclass{article}</span>
<span style="color: #2A00FF;">  \\usepackage[UTF8]{ctex}</span>
<span style="color: #2A00FF;">  \\usepackage{geometry}</span>
<span style="color: #2A00FF;">  \\usepackage{titlesec}</span>
<span style="color: #2A00FF;">  \\usepackage{enumitem}</span>
<span style="color: #2A00FF;">  \\usepackage{fancyhdr, lastpage}</span>
<span style="color: #2A00FF;">  \\usepackage{hyperref}</span>
<span style="color: #2A00FF;">  \\hypersetup{hidelinks}</span>
<span style="color: #2A00FF;">  \\hypersetup{colorlinks = true, urlcolor = blue, linkcolor = blue, citecolor = blue}</span>
<span style="color: #2A00FF;">  \\fancypagestyle{plain}{</span>
<span style="color: #2A00FF;">      \\fancyhf{}</span>
<span style="color: #2A00FF;">      \\fancyfoot[C]{{\\thepage}/\\pageref*{LastPage}}</span>
<span style="color: #2A00FF;">      \\renewcommand{\\headrulewidth}{0pt}</span>
<span style="color: #2A00FF;">  }</span>
<span style="color: #2A00FF;">  \\pagestyle{plain}</span>
<span style="color: #2A00FF;">  \\setlength{\\parindent}{0em}</span>
<span style="color: #2A00FF;">  \\setlist[1]{labelindent=\\parindent,nosep,leftmargin= *}</span>
<span style="color: #2A00FF;">  \\geometry{a4paper,scale=0.8}</span>
<span style="color: #2A00FF;">  \\geometry{a4paper,left=2.5cm,right=2.5cm,top=3cm,bottom=3cm}</span>
<span style="color: #2A00FF;">  \\setlength{\\baselineskip}{20pt}</span>
<span style="color: #2A00FF;">  \\setlength{\\parskip}{5pt}"</span>
             (<span style="color: #2A00FF;">"\\section{%s}"</span> . <span style="color: #2A00FF;">"\\section*{%s}"</span>)
             (<span style="color: #2A00FF;">"\\subsection{%s}"</span> . <span style="color: #2A00FF;">"\\subsection*{%s}"</span>)
             (<span style="color: #2A00FF;">"\\subsubsection{%s}"</span> . <span style="color: #2A00FF;">"\\subsubsection*{%s}"</span>)
             (<span style="color: #2A00FF;">"\\paragraph{%s}"</span> . <span style="color: #2A00FF;">"\\paragraph*{%s}"</span>)
             (<span style="color: #2A00FF;">"\\subparagraph{%s}"</span> . <span style="color: #2A00FF;">"\\subparagraph*{%s}"</span>))

            (<span style="color: #2A00FF;">"article2c"</span>
             <span style="color: #2A00FF;">"\\documentclass[twocolumn]{article}</span>
<span style="color: #2A00FF;">  \\usepackage[UTF8]{ctex}</span>
<span style="color: #2A00FF;">  \\usepackage{geometry}</span>
<span style="color: #2A00FF;">  \\usepackage{titlesec}</span>
<span style="color: #2A00FF;">  \\usepackage{enumitem}</span>
<span style="color: #2A00FF;">  \\usepackage{fancyhdr, lastpage}</span>
<span style="color: #2A00FF;">  \\fancypagestyle{plain}{</span>
<span style="color: #2A00FF;">      \\fancyhf{}</span>
<span style="color: #2A00FF;">      \\fancyfoot[C]{{\\thepage}/\\pageref*{LastPage}}</span>
<span style="color: #2A00FF;">      \\renewcommand{\\headrulewidth}{0pt}</span>
<span style="color: #2A00FF;">  }</span>
<span style="color: #2A00FF;">  \\usepackage{hyperref}</span>
<span style="color: #2A00FF;">  \\hypersetup{hidelinks}</span>
<span style="color: #2A00FF;">  \\hypersetup{colorlinks = true, urlcolor = blue, linkcolor = blue, citecolor = blue}</span>
<span style="color: #2A00FF;">  \\pagestyle{plain}</span>
<span style="color: #2A00FF;">  \\setlist[1]{labelindent=\\parindent,nosep,leftmargin= *}</span>
<span style="color: #2A00FF;">  \\geometry{a4paper,scale=0.8}</span>
<span style="color: #2A00FF;">  \\geometry{a4paper,left=2.5cm,right=2.5cm,top=2cm,bottom=2cm}</span>
<span style="color: #2A00FF;">  \\setlength{\\baselineskip}{20pt}</span>
<span style="color: #2A00FF;">  \\setlength{\\parskip}{5pt}"</span>
             (<span style="color: #2A00FF;">"\\section{%s}"</span> . <span style="color: #2A00FF;">"\\section*{%s}"</span>)
             (<span style="color: #2A00FF;">"\\subsection{%s}"</span> . <span style="color: #2A00FF;">"\\subsection*{%s}"</span>)
             (<span style="color: #2A00FF;">"\\subsubsection{%s}"</span> . <span style="color: #2A00FF;">"\\subsubsection*{%s}"</span>)
             (<span style="color: #2A00FF;">"\\paragraph{%s}"</span> . <span style="color: #2A00FF;">"\\paragraph*{%s}"</span>)
             (<span style="color: #2A00FF;">"\\subparagraph{%s}"</span> . <span style="color: #2A00FF;">"\\subparagraph*{%s}"</span>))

            (<span style="color: #2A00FF;">"IEEEtran"</span>
             <span style="color: #2A00FF;">"\\documentclass[conference]{IEEEtran}</span>
<span style="color: #2A00FF;">  \\IEEEoverridecommandlockouts</span>
<span style="color: #2A00FF;">  \\usepackage{cite}</span>
<span style="color: #2A00FF;">  \\usepackage{amsmath,amssymb,amsfonts}</span>
<span style="color: #2A00FF;">  \\usepackage{algorithmic}</span>
<span style="color: #2A00FF;">  \\usepackage{xcolor}</span>
<span style="color: #2A00FF;">  \\usepackage{hyperref}</span>
<span style="color: #2A00FF;">  \\def\\BibTeX{{\\rm B\\kern-.05em{\\sc i\\kern-.025em b}\\kern-.08em</span>
<span style="color: #2A00FF;">    T\\kern-.1667em\\lower.7ex\\hbox{E}\\kern-.125emX}}"</span>)))

    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-latex-default-class <span style="color: #2A00FF;">"article"</span>)
    <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">remove fontenc, and AUTO in front of inputenc,</span>
    <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">then francais can be processed</span>
    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-latex-default-packages-alist
          (<span style="color: #7F0055; font-weight: bold;">quote</span>
           ((<span style="color: #2A00FF;">""</span> <span style="color: #2A00FF;">"inputenc"</span> t (<span style="color: #2A00FF;">"pdflatex"</span>))
            (<span style="color: #2A00FF;">""</span> <span style="color: #2A00FF;">"minted"</span> t nil)
            (<span style="color: #2A00FF;">""</span> <span style="color: #2A00FF;">"graphicx"</span> t nil)
            (<span style="color: #2A00FF;">""</span> <span style="color: #2A00FF;">"grffile"</span> t nil)
            (<span style="color: #2A00FF;">""</span> <span style="color: #2A00FF;">"longtable"</span> nil nil)
            (<span style="color: #2A00FF;">""</span> <span style="color: #2A00FF;">"wrapfig"</span> nil nil)
            (<span style="color: #2A00FF;">""</span> <span style="color: #2A00FF;">"rotating"</span> nil nil)
            (<span style="color: #2A00FF;">"normalem"</span> <span style="color: #2A00FF;">"ulem"</span> t nil)
            (<span style="color: #2A00FF;">""</span> <span style="color: #2A00FF;">"amsmath"</span> t nil)
            (<span style="color: #2A00FF;">""</span> <span style="color: #2A00FF;">"textcomp"</span> t nil)
            (<span style="color: #2A00FF;">""</span> <span style="color: #2A00FF;">"lettrine"</span> t nil)
            (<span style="color: #2A00FF;">""</span> <span style="color: #2A00FF;">"capt-of"</span> nil nil)))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org355efcd" class="outline-4">
<h4 id="org355efcd"><span class="section-number-4">23.5.2</span> org to html page</h4>
<div class="outline-text-4" id="text-23-5-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">ox-html</span>
    <span style="color: #7F0055; font-weight: bold;">:ensure</span> org
    <span style="color: #7F0055; font-weight: bold;">:commands</span> (org-html-publish-to-html)
    <span style="color: #7F0055; font-weight: bold;">:config</span>
    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-html-validation-link nil)
    (<span style="color: #7F0055; font-weight: bold;">defadvice</span> <span style="color: #0000ff; font-weight: bold;">org-html-paragraph</span> (before fsh-org-html-paragraph-advice
                                          (paragraph contents info) activate)
      <span style="color: #2A00FF;">"Join consecutive Chinese lines into a single long line without</span>
<span style="color: #2A00FF;">  unwanted space when exporting org-mode to html."</span>
      (<span style="color: #7F0055; font-weight: bold;">let</span> ((fixed-contents)
            (orig-contents (ad-get-arg 1))
            (reg-han <span style="color: #2A00FF;">"[[:multibyte:]]"</span>))
        (<span style="color: #7F0055; font-weight: bold;">setq</span> fixed-contents (replace-regexp-in-string
                              (concat <span style="color: #2A00FF;">"</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">(</span><span style="color: #2A00FF;">"</span> reg-han <span style="color: #2A00FF;">"</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">)</span><span style="color: #2A00FF;"> *\n *</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">(</span><span style="color: #2A00FF;">"</span> reg-han <span style="color: #2A00FF;">"</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">)</span><span style="color: #2A00FF;">"</span>)
                              <span style="color: #2A00FF;">"\\1\\2"</span> orig-contents))
        (ad-set-arg 1 fixed-contents)
        ))

    (<span style="color: #7F0055; font-weight: bold;">defun</span> <span style="color: #0000ff; font-weight: bold;">org-babel-result-to-file</span> (result <span style="color: #000000; font-style: italic; text-decoration: underline;">&amp;optional</span> description)
      <span style="color: #2A00FF;">"Convert RESULT into an `</span><span style="color: #110099;">org-mode</span><span style="color: #2A00FF;">' link with optional DESCRIPTION.</span>
<span style="color: #2A00FF;">  If the `</span><span style="color: #110099;">default-directory</span><span style="color: #2A00FF;">' is different from the containing</span>
<span style="color: #2A00FF;">  file's directory then expand relative links."</span>
      (<span style="color: #7F0055; font-weight: bold;">when</span> (stringp result)
        (<span style="color: #7F0055; font-weight: bold;">if</span> (string= <span style="color: #2A00FF;">"svg"</span> (file-name-extension result))
            (<span style="color: #7F0055; font-weight: bold;">progn</span>
              (<span style="color: #7F0055; font-weight: bold;">with-temp-buffer</span>
                (<span style="color: #7F0055; font-weight: bold;">if</span> (file-exists-p (concat result <span style="color: #2A00FF;">".html"</span>))
                    (delete-file (concat result <span style="color: #2A00FF;">".html"</span>)))
                (rename-file result (concat result <span style="color: #2A00FF;">".html"</span>))
                (insert-file-contents (concat result <span style="color: #2A00FF;">".html"</span>))
                (message (concat result <span style="color: #2A00FF;">".html"</span>))
                (format <span style="color: #2A00FF;">"#+BEGIN_HTML</span>
<span style="color: #2A00FF;">  &lt;div style=\"text-align: center;\"&gt;</span>
<span style="color: #2A00FF;">  %s</span>
<span style="color: #2A00FF;">  &lt;/div&gt;</span>
<span style="color: #2A00FF;">  #+END_HTML"</span>
                        (buffer-string)
                        )))
          (<span style="color: #7F0055; font-weight: bold;">progn</span>
            (format <span style="color: #2A00FF;">"[[file:%s]%s]"</span>
                    (<span style="color: #7F0055; font-weight: bold;">if</span> (<span style="color: #7F0055; font-weight: bold;">and</span> default-directory
                             buffer-file-name
                             (not (string= (expand-file-name default-directory)
                                           (expand-file-name
                                            (file-name-directory buffer-file-name)))))
                        (expand-file-name result default-directory)
                      result)
                    (<span style="color: #7F0055; font-weight: bold;">if</span> description (concat <span style="color: #2A00FF;">"["</span> description <span style="color: #2A00FF;">"]"</span>) <span style="color: #2A00FF;">""</span>)))))))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org3881e8e" class="outline-3">
<h3 id="org3881e8e"><span class="section-number-3">23.6</span> org to html slide</h3>
<div class="outline-text-3" id="text-23-6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">org-re-reveal</span>
    <span style="color: #7F0055; font-weight: bold;">:bind</span> (<span style="color: #2A00FF;">"C-x r v"</span> . org-re-reveal-export-to-html-and-browse)
    <span style="color: #7F0055; font-weight: bold;">:config</span>
    (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">htmlize</span> <span style="color: #7F0055; font-weight: bold;">:ensure</span> t)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-re-reveal-root <span style="color: #2A00FF;">"https://cdn.jsdelivr.net/npm/reveal.js@3.9.2/"</span>)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-re-reveal-theme <span style="color: #2A00FF;">"none"</span>)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-re-reveal-width 1000)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-re-reveal-height 750)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-re-reveal-transition <span style="color: #2A00FF;">"none"</span>)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-re-reveal-hlevel 2)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-re-reveal-extra-css <span style="color: #2A00FF;">"./kimim.css"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-orga469354" class="outline-3">
<h3 id="orga469354"><span class="section-number-3">23.7</span> org with diagram</h3>
<div class="outline-text-3" id="text-23-7">
<p>
That's fun to draw UML with <code>ob-plantuml</code> inside <code>orgmode</code>:
</p>

<ol class="org-ol">
<li>install <code>graphviz</code> in <code>cygwin</code> setup tool</li>
<li>download <code>plantuml.jar</code> from <a href="https://plantuml.com/download">https://plantuml.com/download</a>, and put it to
<code>(concat kimim/path-kimikit "plantuml/plantuml.jar")</code></li>
</ol>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">plantuml-mode</span>
  <span style="color: #7F0055; font-weight: bold;">:config</span>
  (<span style="color: #7F0055; font-weight: bold;">setq</span> plantuml-default-exec-mode 'jar))

(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">ob-plantuml</span>
  <span style="color: #7F0055; font-weight: bold;">:ensure</span> org
  <span style="color: #7F0055; font-weight: bold;">:config</span>
  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">plantuml-mode</span>)
  (<span style="color: #7F0055; font-weight: bold;">require</span> '<span style="color: #110099;">ob-plantuml</span>)
  <span style="color: #3F7F5F;">;;</span><span style="color: #3F7F5F;">(setenv "GRAPHVIZ_DOT" (concat kimim/path-root "usr/bin/dot"))</span>
  (<span style="color: #7F0055; font-weight: bold;">setq</span> org-plantuml-jar-path (concat kimim/path-kimikit <span style="color: #2A00FF;">"plantuml/plantuml.jar"</span>))
  (<span style="color: #7F0055; font-weight: bold;">defun</span> <span style="color: #0000ff; font-weight: bold;">org-babel-execute:plantuml</span> (body params)
    <span style="color: #2A00FF;">"Execute a block of plantuml code with org-babel.</span>
<span style="color: #2A00FF;">This function is called by `</span><span style="color: #110099;">org-babel-execute-src-block</span><span style="color: #2A00FF;">'."</span>
    (<span style="color: #7F0055; font-weight: bold;">let*</span> ((out-file (<span style="color: #7F0055; font-weight: bold;">or</span> (cdr (assq <span style="color: #7F0055; font-weight: bold;">:file</span> params))
                         (<span style="color: #FF0000;">error</span> <span style="color: #2A00FF;">"PlantUML requires a \":file\" header argument"</span>)))
           (cmdline (cdr (assq <span style="color: #7F0055; font-weight: bold;">:cmdline</span> params)))
           (in-file (org-babel-temp-file <span style="color: #2A00FF;">"plantuml-"</span>))
           (java (<span style="color: #7F0055; font-weight: bold;">or</span> (cdr (assq <span style="color: #7F0055; font-weight: bold;">:java</span> params)) <span style="color: #2A00FF;">""</span>))
           (full-body (org-babel-plantuml-make-body body params))
           (cmd (<span style="color: #7F0055; font-weight: bold;">if</span> (string= <span style="color: #2A00FF;">""</span> org-plantuml-jar-path)
                    (<span style="color: #FF0000;">error</span> <span style="color: #2A00FF;">"`</span><span style="color: #110099;">org-plantuml-jar-path</span><span style="color: #2A00FF;">' is not set"</span>)
                  (concat <span style="color: #2A00FF;">"java "</span> java <span style="color: #2A00FF;">" -jar `cygpath -wp "</span>
                          (shell-quote-argument
                           (expand-file-name org-plantuml-jar-path))
                          <span style="color: #2A00FF;">" ` "</span>
                          <span style="color: #2A00FF;">" -charset UTF-8 "</span>
                          (<span style="color: #7F0055; font-weight: bold;">if</span> (string= (file-name-extension out-file) <span style="color: #2A00FF;">"png"</span>)
                              <span style="color: #2A00FF;">" -tpng"</span> <span style="color: #2A00FF;">""</span>)
                          (<span style="color: #7F0055; font-weight: bold;">if</span> (string= (file-name-extension out-file) <span style="color: #2A00FF;">"svg"</span>)
                              <span style="color: #2A00FF;">" -tsvg"</span> <span style="color: #2A00FF;">""</span>)
                          (<span style="color: #7F0055; font-weight: bold;">if</span> (string= (file-name-extension out-file) <span style="color: #2A00FF;">"eps"</span>)
                              <span style="color: #2A00FF;">" -teps"</span> <span style="color: #2A00FF;">""</span>)
                          (<span style="color: #7F0055; font-weight: bold;">if</span> (string= (file-name-extension out-file) <span style="color: #2A00FF;">"pdf"</span>)
                              <span style="color: #2A00FF;">" -tpdf"</span> <span style="color: #2A00FF;">""</span>)
                          (<span style="color: #7F0055; font-weight: bold;">if</span> (string= (file-name-extension out-file) <span style="color: #2A00FF;">"tex"</span>)
                              <span style="color: #2A00FF;">" -tlatex"</span> <span style="color: #2A00FF;">""</span>)
                          (<span style="color: #7F0055; font-weight: bold;">if</span> (string= (file-name-extension out-file) <span style="color: #2A00FF;">"vdx"</span>)
                              <span style="color: #2A00FF;">" -tvdx"</span> <span style="color: #2A00FF;">""</span>)
                          (<span style="color: #7F0055; font-weight: bold;">if</span> (string= (file-name-extension out-file) <span style="color: #2A00FF;">"xmi"</span>)
                              <span style="color: #2A00FF;">" -txmi"</span> <span style="color: #2A00FF;">""</span>)
                          (<span style="color: #7F0055; font-weight: bold;">if</span> (string= (file-name-extension out-file) <span style="color: #2A00FF;">"scxml"</span>)
                              <span style="color: #2A00FF;">" -tscxml"</span> <span style="color: #2A00FF;">""</span>)
                          (<span style="color: #7F0055; font-weight: bold;">if</span> (string= (file-name-extension out-file) <span style="color: #2A00FF;">"html"</span>)
                              <span style="color: #2A00FF;">" -thtml"</span> <span style="color: #2A00FF;">""</span>)
                          (<span style="color: #7F0055; font-weight: bold;">if</span> (string= (file-name-extension out-file) <span style="color: #2A00FF;">"txt"</span>)
                              <span style="color: #2A00FF;">" -ttxt"</span> <span style="color: #2A00FF;">""</span>)
                          (<span style="color: #7F0055; font-weight: bold;">if</span> (string= (file-name-extension out-file) <span style="color: #2A00FF;">"utxt"</span>)
                              <span style="color: #2A00FF;">" -utxt"</span> <span style="color: #2A00FF;">""</span>)
                          <span style="color: #2A00FF;">" -p "</span> cmdline <span style="color: #2A00FF;">" &lt; "</span>
                          (org-babel-process-file-name in-file)
                          <span style="color: #2A00FF;">" &gt; "</span>
                          (org-babel-process-file-name out-file)))))
      (<span style="color: #7F0055; font-weight: bold;">unless</span> (file-exists-p org-plantuml-jar-path)
        (<span style="color: #FF0000;">error</span> <span style="color: #2A00FF;">"Could not find plantuml.jar at %s"</span> org-plantuml-jar-path))
      (<span style="color: #7F0055; font-weight: bold;">with-temp-file</span> in-file (insert full-body))
      (message <span style="color: #2A00FF;">"%s"</span> cmd) (org-babel-eval cmd <span style="color: #2A00FF;">""</span>)
      nil)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org14e1eab" class="outline-3">
<h3 id="org14e1eab"><span class="section-number-3">23.8</span> org as GTD system</h3>
<div class="outline-text-3" id="text-23-8">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">org</span>
  <span style="color: #7F0055; font-weight: bold;">:commands</span> (org-toggle-office org-toggle-home org-toggle-home-or-office)
  <span style="color: #7F0055; font-weight: bold;">:bind</span> (<span style="color: #7F0055; font-weight: bold;">:map</span> org-mode-map
         <span style="color: #7F0055; font-weight: bold;">:map</span> org-agenda-mode-map
         (<span style="color: #2A00FF;">"C-c C-k"</span> . org-agenda-kill-files)
         (<span style="color: #2A00FF;">"&lt;C-left&gt;"</span>  . org-agenda-do-date-earlier)
         (<span style="color: #2A00FF;">"&lt;C-right&gt;"</span> . org-agenda-do-date-later)
         (<span style="color: #2A00FF;">"&lt;S-left&gt;"</span> . (<span style="color: #7F0055; font-weight: bold;">lambda</span> ()
                         (<span style="color: #7F0055; font-weight: bold;">interactive</span>)
                         (org-agenda-todo 'left)))
         (<span style="color: #2A00FF;">"&lt;S-right&gt;"</span> . (<span style="color: #7F0055; font-weight: bold;">lambda</span> ()
                          (<span style="color: #7F0055; font-weight: bold;">interactive</span>)
                          (org-agenda-todo 'right))))
  <span style="color: #7F0055; font-weight: bold;">:config</span>
  (<span style="color: #7F0055; font-weight: bold;">require</span> '<span style="color: #110099;">org-agenda</span>)
  (add-hook 'kill-emacs-hook
            (<span style="color: #7F0055; font-weight: bold;">lambda</span> ()
              (org-clock-out nil t nil)
              (org-save-all-org-buffers)))
  (<span style="color: #7F0055; font-weight: bold;">setq</span> org-todo-keywords
        '(
          <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">for tasks</span>
          (sequence <span style="color: #2A00FF;">"TODO(t!)"</span> <span style="color: #2A00FF;">"SCHED(s)"</span> <span style="color: #2A00FF;">"|"</span> <span style="color: #2A00FF;">"DONE(d@/!)"</span>)
          <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">for risks, actions, problems</span>
          (sequence <span style="color: #2A00FF;">"OPEN(o!)"</span> <span style="color: #2A00FF;">"WAIT(w@/!)"</span> <span style="color: #2A00FF;">"|"</span> <span style="color: #2A00FF;">"CLOSE(c@/!)"</span>)
          (sequence <span style="color: #2A00FF;">"|"</span> <span style="color: #2A00FF;">"SOMEDAY(m)"</span>)
          (sequence <span style="color: #2A00FF;">"|"</span> <span style="color: #2A00FF;">"ABORT(a@/!)"</span>)
          (sequence <span style="color: #2A00FF;">"REPEAT(r)"</span> <span style="color: #2A00FF;">"|"</span>)))

  (<span style="color: #7F0055; font-weight: bold;">setq</span> org-tag-alist
        '((<span style="color: #2A00FF;">"@office"</span> . ?o) (<span style="color: #2A00FF;">"@home"</span> . ?h)
          (<span style="color: #2A00FF;">"team"</span> . ?t) (<span style="color: #2A00FF;">"leader"</span> . ?l) (<span style="color: #2A00FF;">"boss"</span> . ?b)
          (<span style="color: #2A00FF;">"risk"</span> . ?k) (<span style="color: #2A00FF;">"sync"</span> . ?s) (<span style="color: #2A00FF;">"followup"</span> . ?f)
          (<span style="color: #2A00FF;">"reading"</span> . ?r) (<span style="color: #2A00FF;">"writing"</span> . ?w)
          (<span style="color: #2A00FF;">"project"</span> . ?p) (<span style="color: #2A00FF;">"category"</span> . ?c)
          (<span style="color: #2A00FF;">"habit"</span> . ?H)
          (<span style="color: #2A00FF;">"next"</span> . ?n)))

  (<span style="color: #7F0055; font-weight: bold;">setq</span> org-tags-exclude-from-inheritance '(<span style="color: #2A00FF;">"project"</span> <span style="color: #2A00FF;">"category"</span>))

  (diminish 'auto-fill-function)

  (add-hook 'org-mode-hook
            (<span style="color: #7F0055; font-weight: bold;">lambda</span> ()
              <span style="color: #3F7F5F;">;;</span><span style="color: #3F7F5F;">(auto-fill-mode)</span>
              <span style="color: #3F7F5F;">;;</span><span style="color: #3F7F5F;">(drag-stuff-mode -1)</span>
              ))

  (<span style="color: #7F0055; font-weight: bold;">setq</span> org-stuck-projects
        '(<span style="color: #2A00FF;">"+LEVEL&gt;=2-category-habit-info"</span>
          (<span style="color: #2A00FF;">"TODO"</span> <span style="color: #2A00FF;">"SCHED"</span>  <span style="color: #2A00FF;">"DONE"</span>
           <span style="color: #2A00FF;">"OPEN"</span> <span style="color: #2A00FF;">"WAIT"</span> <span style="color: #2A00FF;">"CLOSE"</span>
           <span style="color: #2A00FF;">"ABORT"</span> <span style="color: #2A00FF;">"SOMEDAY"</span> <span style="color: #2A00FF;">"REPEAT"</span>)
          nil nil))

  (<span style="color: #7F0055; font-weight: bold;">setq</span> org-refile-targets
        '(<span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">refile to maxlevel 2 of current file</span>
          (nil . (<span style="color: #7F0055; font-weight: bold;">:maxlevel</span> . 1))
          <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">refile to maxlevel 1 of org-refile-files</span>
          (org-refile-files <span style="color: #7F0055; font-weight: bold;">:maxlevel</span> . 1)
          <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">refile to item with 'project' tag in org-refile-files</span>
          (org-refile-files <span style="color: #7F0055; font-weight: bold;">:tag</span> . <span style="color: #2A00FF;">"project"</span>)
          (org-refile-files <span style="color: #7F0055; font-weight: bold;">:tag</span> . <span style="color: #2A00FF;">"category"</span>)))

  (<span style="color: #7F0055; font-weight: bold;">defadvice</span> <span style="color: #0000ff; font-weight: bold;">org-schedule</span> (after add-todo activate)
    (<span style="color: #7F0055; font-weight: bold;">if</span> (<span style="color: #7F0055; font-weight: bold;">or</span> (string= <span style="color: #2A00FF;">"OPEN"</span> (org-get-todo-state))
            (string= <span style="color: #2A00FF;">"WAIT"</span> (org-get-todo-state))
            (string= <span style="color: #2A00FF;">"CLOSE"</span> (org-get-todo-state)))
        (org-todo <span style="color: #2A00FF;">"WAIT"</span>)
      (org-todo <span style="color: #2A00FF;">"SCHED"</span>)))

  (<span style="color: #7F0055; font-weight: bold;">defadvice</span> <span style="color: #0000ff; font-weight: bold;">org-deadline</span> (after add-todo activate)
    (<span style="color: #7F0055; font-weight: bold;">if</span> (<span style="color: #7F0055; font-weight: bold;">or</span> (string= <span style="color: #2A00FF;">"OPEN"</span> (org-get-todo-state))
            (string= <span style="color: #2A00FF;">"WAIT"</span> (org-get-todo-state))
            (string= <span style="color: #2A00FF;">"CLOSE"</span> (org-get-todo-state)))
        (org-todo <span style="color: #2A00FF;">"WAIT"</span>)
      (org-todo <span style="color: #2A00FF;">"SCHED"</span>)))

  (<span style="color: #7F0055; font-weight: bold;">setq</span> org-log-done t)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> org-todo-repeat-to-state <span style="color: #2A00FF;">"REPEAT"</span>)

  <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">settings for org-agenda-view</span>
  (<span style="color: #7F0055; font-weight: bold;">setq</span> org-agenda-span 2)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> org-agenda-skip-scheduled-if-done t)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> org-agenda-skip-deadline-if-done t)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> org-deadline-warning-days 2)
  (add-hook 'org-agenda-after-show-hook 'org-narrow-to-subtree)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> org-agenda-custom-commands
        '((<span style="color: #2A00FF;">"t"</span> todo <span style="color: #2A00FF;">"TODO|OPEN"</span>
           ((org-agenda-sorting-strategy '(priority-down))))
          (<span style="color: #2A00FF;">"w"</span> todo <span style="color: #2A00FF;">"SCHED|WAIT"</span>
           ((org-agenda-sorting-strategy '(priority-down))))
          <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">all task should be done or doing</span>
          (<span style="color: #2A00FF;">"d"</span> todo <span style="color: #2A00FF;">"TODO|SCHED|OPEN|WAIT"</span>
           ((org-agenda-sorting-strategy '(priority-down))))
          (<span style="color: #2A00FF;">"b"</span> tags <span style="color: #2A00FF;">"boss/-ABORT-CLOSE-DONE"</span>
           ((org-agenda-sorting-strategy  '(priority-down))))
          (<span style="color: #2A00FF;">"f"</span> todo <span style="color: #2A00FF;">"SOMEDAY"</span>
           ((org-agenda-sorting-strategy '(priority-down))))
          (<span style="color: #2A00FF;">"h"</span> tags <span style="color: #2A00FF;">"habit/-ABORT-CLOSE"</span>
           ((org-agenda-sorting-strategy '(todo-state-down))))
          (<span style="color: #2A00FF;">"c"</span> tags <span style="color: #2A00FF;">"clock"</span>
           ((org-agenda-sorting-strategy '(priority-down))))))

  (<span style="color: #7F0055; font-weight: bold;">setq</span> org-directory kimim/path-org)

  (<span style="color: #7F0055; font-weight: bold;">setq</span> org-capture-templates
        '((<span style="color: #2A00FF;">"c"</span> <span style="color: #2A00FF;">"Capture"</span> entry (file+headline <span style="color: #2A00FF;">"capture.org"</span> <span style="color: #2A00FF;">"Inbox"</span>)
           <span style="color: #2A00FF;">"* %?\n:PROPERTIES:\n:CAPTURED: %U\n:END:\n"</span>)
          (<span style="color: #2A00FF;">"t"</span> <span style="color: #2A00FF;">"TODO Task"</span>    entry (file+headline <span style="color: #2A00FF;">"capture.org"</span> <span style="color: #2A00FF;">"Inbox"</span>)
           <span style="color: #2A00FF;">"* TODO %?\n:PROPERTIES:\n:CAPTURED: %U\n:END:\n"</span>)
          (<span style="color: #2A00FF;">"s"</span> <span style="color: #2A00FF;">"SCHED Task"</span>    entry (file+headline <span style="color: #2A00FF;">"capture.org"</span> <span style="color: #2A00FF;">"Inbox"</span>)
           <span style="color: #2A00FF;">"* SCHED %?\nSCHEDULED: %t\n:PROPERTIES:\n:CAPTURED: %U\n:END:\n"</span>)
          (<span style="color: #2A00FF;">"o"</span> <span style="color: #2A00FF;">"OPEN Issue"</span>  entry (file+headline <span style="color: #2A00FF;">"capture.org"</span> <span style="color: #2A00FF;">"Inbox"</span>)
           <span style="color: #2A00FF;">"* OPEN %?\n:PROPERTIES:\n:CAPTURED: %U\n:END:\n"</span>)
          (<span style="color: #2A00FF;">"w"</span> <span style="color: #2A00FF;">"WAIT Task"</span>    entry (file+headline <span style="color: #2A00FF;">"capture.org"</span> <span style="color: #2A00FF;">"Inbox"</span>)
           <span style="color: #2A00FF;">"* WAIT %?\nSCHEDULED: %t\n:PROPERTIES:\n:CAPTURED: %U\n:END:\n"</span>)
          (<span style="color: #2A00FF;">"h"</span> <span style="color: #2A00FF;">"Habit"</span>   entry (file+headline <span style="color: #2A00FF;">"global.org"</span>   <span style="color: #2A00FF;">"Habit"</span>)
           <span style="color: #2A00FF;">"* %?  :habit:\n:PROPERTIES:\n:CAPTURED: %U\n:END:\n"</span>)))

  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">ivy</span>) <span style="color: #3F7F5F;">; </span><span style="color: #3F7F5F;">use ivy to complete refile files</span>
  (<span style="color: #7F0055; font-weight: bold;">setq</span> org-agenda-files
        (file-expand-wildcards (concat kimim/path-org <span style="color: #2A00FF;">"*.org"</span>)))
  (<span style="color: #7F0055; font-weight: bold;">setq</span> org-refile-files
        (file-expand-wildcards (concat kimim/path-org <span style="color: #2A00FF;">"*.org"</span>)))
  (<span style="color: #7F0055; font-weight: bold;">defun</span> <span style="color: #0000ff; font-weight: bold;">org-agenda-kill-files</span> ()
    (<span style="color: #7F0055; font-weight: bold;">interactive</span>)
    (org-agenda-kill-all-agenda-buffers)
    (mapcar (<span style="color: #7F0055; font-weight: bold;">lambda</span> (file)
              (<span style="color: #7F0055; font-weight: bold;">if-let</span> (buf (get-file-buffer file))
                  (kill-buffer buf)))
            org-agenda-files)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orga4a0579" class="outline-3">
<h3 id="orga4a0579"><span class="section-number-3">23.9</span> org link: match</h3>
<div class="outline-text-3" id="text-23-9">
<p>
New link to use everything to locate a file with unique ID:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">org</span>
    <span style="color: #7F0055; font-weight: bold;">:config</span>
    (org-link-set-parameters <span style="color: #2A00FF;">"match"</span>
                             <span style="color: #7F0055; font-weight: bold;">:follow</span> #'org-match-open)

    (<span style="color: #7F0055; font-weight: bold;">defun</span> <span style="color: #0000ff; font-weight: bold;">org-match-open</span> (path)
      <span style="color: #2A00FF;">"Visit the match search on PATH.</span>
<span style="color: #2A00FF;">       PATH should be a topic that can be thrown at everything/?."</span>
      (w32-shell-execute
       <span style="color: #2A00FF;">"open"</span> <span style="color: #2A00FF;">"Everything"</span> (concat <span style="color: #2A00FF;">"-search "</span> path))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org993e672" class="outline-3">
<h3 id="org993e672"><span class="section-number-3">23.10</span> org link: onenote</h3>
<div class="outline-text-3" id="text-23-10">
<p>
New link to use everything to locate a file with unique ID:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">org</span>
    <span style="color: #7F0055; font-weight: bold;">:config</span>
    (org-link-set-parameters <span style="color: #2A00FF;">"onenote"</span>
                             <span style="color: #7F0055; font-weight: bold;">:follow</span> #'org-onenote-open)

    (<span style="color: #7F0055; font-weight: bold;">defun</span> <span style="color: #0000ff; font-weight: bold;">org-onenote-open</span> (path)
      <span style="color: #2A00FF;">"Visit the match search on PATH.</span>
<span style="color: #2A00FF;">       PATH should be a topic that can be thrown at everything/?."</span>
      (<span style="color: #7F0055; font-weight: bold;">cond</span>
       ((eq system-type 'windows-nt)
        (<span style="color: #7F0055; font-weight: bold;">progn</span>
          (w32-shell-execute
           <span style="color: #2A00FF;">"open"</span> (concat <span style="color: #2A00FF;">"onenote:"</span> path))))
        ((eq window-system 'ns)
         (shell-command
          (replace-regexp-in-string
           <span style="color: #2A00FF;">"&amp;"</span> <span style="color: #2A00FF;">"\\\\&amp;"</span> (format <span style="color: #2A00FF;">"open onenote:%s"</span> path)))))))
</pre>
</div>
</div>
</div>


<div id="outline-container-orgef46558" class="outline-3">
<h3 id="orgef46558"><span class="section-number-3">23.11</span> org link: deft</h3>
<div class="outline-text-3" id="text-23-11">
<p>
<code>C-x l</code> keychord can store deft links in deft mode, but cannot fetch the link
from deft note. Below defines a function to fetch a deft style link, which can
be used to paste directly in other org files, such as work journal. Buffer file
name handling function can be found from emacs manual<sup><a id="fnr.16" class="footref" href="#fn.16">16</a></sup>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">org</span>
    <span style="color: #7F0055; font-weight: bold;">:bind</span>
    ((<span style="color: #2A00FF;">"C-x m d"</span> . kimim/deft-store-link))
    <span style="color: #7F0055; font-weight: bold;">:config</span>
    (<span style="color: #7F0055; font-weight: bold;">defun</span> <span style="color: #0000ff; font-weight: bold;">kimim/deft-store-link</span>()
      <span style="color: #2A00FF;">"get deft link of current note file."</span>
      (<span style="color: #7F0055; font-weight: bold;">interactive</span>)
      (<span style="color: #7F0055; font-weight: bold;">unless</span> (buffer-file-name)
        (<span style="color: #FF0000;">error</span> <span style="color: #2A00FF;">"No file for buffer %s"</span> (buffer-name)))
      (<span style="color: #7F0055; font-weight: bold;">let</span> ((msg (format <span style="color: #2A00FF;">"[[deft:%s]]"</span>
                         (file-name-nondirectory (buffer-name)))))
        (kill-new msg)
        (message msg))))
</pre>
</div>
</div>
</div>


<div id="outline-container-orgf5f6af6" class="outline-3">
<h3 id="orgf5f6af6"><span class="section-number-3">23.12</span> org publish to jekyll</h3>
<div class="outline-text-3" id="text-23-12">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">org</span>
    <span style="color: #7F0055; font-weight: bold;">:commands</span> (jekyll)
    <span style="color: #7F0055; font-weight: bold;">:config</span>
    <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">file in jekyll base will also be uploaded to github</span>
    (<span style="color: #7F0055; font-weight: bold;">defvar</span> <span style="color: #000000;">path-jekyll-base</span> <span style="color: #2A00FF;">"~/kimi.im/_notes/_posts"</span>)
    <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">in order to sync draft with cloud sync driver</span>
    (<span style="color: #7F0055; font-weight: bold;">defvar</span> <span style="color: #000000;">path-jekyll-draft</span> (concat kimim/path-sync <span style="color: #2A00FF;">"kimim/_draft/"</span>))
    <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">file in jekyll base will also be uploaded to github</span>

    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-publish-project-alist
          '(
            (<span style="color: #2A00FF;">"org-blog-content"</span>
             <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">Path to your org files.</span>
             <span style="color: #7F0055; font-weight: bold;">:base-directory</span> <span style="color: #2A00FF;">"~/kimi.im/_notes"</span>
             <span style="color: #7F0055; font-weight: bold;">:base-extension</span> <span style="color: #2A00FF;">"org"</span>
             <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">Path to your jekyll project.</span>
             <span style="color: #7F0055; font-weight: bold;">:publishing-directory</span> <span style="color: #2A00FF;">"~/kimi.im/"</span>
             <span style="color: #7F0055; font-weight: bold;">:recursive</span> t
             <span style="color: #7F0055; font-weight: bold;">:publishing-function</span> org-html-publish-to-html
             <span style="color: #7F0055; font-weight: bold;">:headline-levels</span> 4
             <span style="color: #7F0055; font-weight: bold;">:section-numbers</span> t
             <span style="color: #7F0055; font-weight: bold;">:html-extension</span> <span style="color: #2A00FF;">"html"</span>
             <span style="color: #7F0055; font-weight: bold;">:body-only</span> t <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">Only export section between &lt;body&gt;&lt;/body&gt;</span>
             <span style="color: #7F0055; font-weight: bold;">:with-toc</span> nil
             )
            (<span style="color: #2A00FF;">"org-blog-static"</span>
             <span style="color: #7F0055; font-weight: bold;">:base-directory</span> <span style="color: #2A00FF;">"~/kimi.im/_notes/"</span>
             <span style="color: #7F0055; font-weight: bold;">:base-extension</span> <span style="color: #2A00FF;">"css</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">|</span><span style="color: #2A00FF;">js</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">|</span><span style="color: #2A00FF;">png</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">|</span><span style="color: #2A00FF;">jpg</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">|</span><span style="color: #2A00FF;">gif</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">|</span><span style="color: #2A00FF;">pdf</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">|</span><span style="color: #2A00FF;">mp3</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">|</span><span style="color: #2A00FF;">ogg</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">|</span><span style="color: #2A00FF;">swf</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">|</span><span style="color: #2A00FF;">php</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">|</span><span style="color: #2A00FF;">svg"</span>
             <span style="color: #7F0055; font-weight: bold;">:publishing-directory</span> <span style="color: #2A00FF;">"~/kimi.im/"</span>
             <span style="color: #7F0055; font-weight: bold;">:recursive</span> t
             <span style="color: #7F0055; font-weight: bold;">:publishing-function</span> org-publish-attachment)
            (<span style="color: #2A00FF;">"blog"</span> <span style="color: #7F0055; font-weight: bold;">:components</span> (<span style="color: #2A00FF;">"org-blog-content"</span> <span style="color: #2A00FF;">"org-blog-static"</span>))))

    (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">ivy</span>)

    (<span style="color: #7F0055; font-weight: bold;">defun</span> <span style="color: #0000ff; font-weight: bold;">jekyll-post</span> ()
      <span style="color: #2A00FF;">"Post current buffer to kimi.im"</span>
      (<span style="color: #7F0055; font-weight: bold;">interactive</span>)
      <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">get categories</span>
      <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">get buffer file name</span>
      (<span style="color: #7F0055; font-weight: bold;">let</span> ((category (jekyll-get-category))
            (filepath (file-name-directory buffer-file-name))
            (filename (file-name-nondirectory buffer-file-name))
            newfilename)
        (<span style="color: #7F0055; font-weight: bold;">if</span> (not (string-match-p (expand-file-name path-jekyll-base) filepath))
            (<span style="color: #7F0055; font-weight: bold;">progn</span>
              (<span style="color: #7F0055; font-weight: bold;">setq</span> newfilename (concat
                                 path-jekyll-base <span style="color: #2A00FF;">"/"</span>
                                 category <span style="color: #2A00FF;">"/"</span>
                                 (format-time-string <span style="color: #2A00FF;">"%Y-%m-%d-"</span>) filename))
              (rename-file buffer-file-name newfilename)
              (switch-to-buffer (find-file-noselect newfilename)))
          <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">execute org-publish-current-file</span>
          (org-publish-current-file)
          (magit-status-setup-buffer))))

    (<span style="color: #7F0055; font-weight: bold;">defun</span> <span style="color: #0000ff; font-weight: bold;">jekyll-tag</span> ()
      <span style="color: #2A00FF;">"add new tags"</span>
      (<span style="color: #7F0055; font-weight: bold;">interactive</span>)
      <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">find "tags: [" and replace with "tags: [new-tag, "</span>
      (<span style="color: #7F0055; font-weight: bold;">let</span> (tag)
        (goto-char (point-min))
        <span style="color: #3F7F5F;">;;  </span><span style="color: #3F7F5F;">(search-forward "tags: [")</span>
        (re-search-forward <span style="color: #2A00FF;">"tags: \\["</span> nil t)
        (<span style="color: #7F0055; font-weight: bold;">setq</span> tag (ivy-read <span style="color: #2A00FF;">"tags: "</span> '(
                                       <span style="color: #2A00FF;">"Deutsch"</span> <span style="color: #2A00FF;">"Fran&#231;ais"</span> <span style="color: #2A00FF;">"English"</span>
                                       <span style="color: #2A00FF;">"emacs"</span> <span style="color: #2A00FF;">"org-mode"</span>
                                       <span style="color: #2A00FF;">"Windows"</span> <span style="color: #2A00FF;">"macOS"</span> <span style="color: #2A00FF;">"Linux"</span>
                                       <span style="color: #2A00FF;">"industry"</span> <span style="color: #2A00FF;">"edge-computing"</span>
                                       <span style="color: #2A00FF;">"travel"</span> <span style="color: #2A00FF;">"photography"</span>
                                       <span style="color: #2A00FF;">"leadership"</span>
                                       <span style="color: #2A00FF;">"x"</span>
                                       )))
        (<span style="color: #7F0055; font-weight: bold;">if</span> (string= <span style="color: #2A00FF;">"x"</span> tag)
            (insert <span style="color: #2A00FF;">""</span>)
          (insert tag <span style="color: #2A00FF;">", "</span>))
        tag))

    (<span style="color: #7F0055; font-weight: bold;">defun</span> <span style="color: #0000ff; font-weight: bold;">jekyll-header</span>()
      <span style="color: #2A00FF;">"Insert jekyll post headers,</span>
<span style="color: #2A00FF;">  catergories and tags are generated from exisiting posts"</span>
      (<span style="color: #7F0055; font-weight: bold;">interactive</span>)
      (<span style="color: #7F0055; font-weight: bold;">let</span> (tag)
        (insert <span style="color: #2A00FF;">"#+BEGIN_EXPORT html\n---\nlayout: post\ntitle: "</span>)
        (insert (read-string <span style="color: #2A00FF;">"Title: "</span>))
        (insert <span style="color: #2A00FF;">"\ncategories: ["</span>)
        (insert (ivy-read <span style="color: #2A00FF;">"categories: "</span> '(
                                           <span style="color: #2A00FF;">"technology"</span>
                                           <span style="color: #2A00FF;">"productivity"</span> <span style="color: #2A00FF;">"leadership"</span>
                                           <span style="color: #2A00FF;">"psychology"</span> <span style="color: #2A00FF;">"language"</span>
                                           <span style="color: #2A00FF;">"education"</span> <span style="color: #2A00FF;">"photography"</span>
                                           )))
        (insert <span style="color: #2A00FF;">"]"</span>)
        (insert <span style="color: #2A00FF;">"\ntags: ["</span>)
        (<span style="color: #7F0055; font-weight: bold;">while</span> (<span style="color: #7F0055; font-weight: bold;">progn</span>
                 (<span style="color: #7F0055; font-weight: bold;">setq</span> tag (jekyll-tag))
                 (not (string= <span style="color: #2A00FF;">"x"</span> tag))))
        (move-end-of-line 1)
        (backward-delete-char 2)
        (insert <span style="color: #2A00FF;">"]\n---\n#+END_EXPORT\n\n"</span>)))

    (<span style="color: #7F0055; font-weight: bold;">defun</span> <span style="color: #0000ff; font-weight: bold;">jekyll</span> ()
      (<span style="color: #7F0055; font-weight: bold;">interactive</span>)
      (find-file (concat path-jekyll-draft <span style="color: #2A00FF;">"/"</span>
                         (replace-regexp-in-string
                          <span style="color: #2A00FF;">" "</span> <span style="color: #2A00FF;">"-"</span> (read-string <span style="color: #2A00FF;">"Filename: "</span>)) <span style="color: #2A00FF;">".org"</span>))
      (jekyll-header)
      (save-buffer))

    (<span style="color: #7F0055; font-weight: bold;">defun</span> <span style="color: #0000ff; font-weight: bold;">jekyll-get-category</span> ()
      (<span style="color: #7F0055; font-weight: bold;">interactive</span>)
      (goto-char (point-min))
      (re-search-forward <span style="color: #2A00FF;">"^categories: \\[</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">(</span><span style="color: #2A00FF;">[a-z-]*</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">)</span><span style="color: #2A00FF;">\\]$"</span> nil t)
      (match-string 1))

    (<span style="color: #7F0055; font-weight: bold;">defun</span> <span style="color: #0000ff; font-weight: bold;">jekyll-test</span> ()
      (<span style="color: #7F0055; font-weight: bold;">interactive</span>)
      (org-open-file (org-html-export-to-html nil))))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orga44781f" class="outline-2">
<h2 id="orga44781f"><span class="section-number-2">24</span> Note Taking Tools</h2>
<div class="outline-text-2" id="text-24">
</div>
<div id="outline-container-orga3476fa" class="outline-3">
<h3 id="orga3476fa"><span class="section-number-3">24.1</span> Deft</h3>
<div class="outline-text-3" id="text-24-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">deft</span>
    <span style="color: #7F0055; font-weight: bold;">:bind</span>
    ((<span style="color: #2A00FF;">"C-x d"</span> . deft-find-file)
     (<span style="color: #2A00FF;">"C-x C-d"</span> . deft))
    <span style="color: #7F0055; font-weight: bold;">:config</span>
    (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">ivy</span>)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> deft-extensions '(<span style="color: #2A00FF;">"txt"</span> <span style="color: #2A00FF;">"org"</span> <span style="color: #2A00FF;">"md"</span>))
    (<span style="color: #7F0055; font-weight: bold;">setq</span> deft-directory kimim/path-notes)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> deft-recursive t)
    <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">disable auto save</span>
    (<span style="color: #7F0055; font-weight: bold;">setq</span> deft-auto-save-interval 0)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> deft-file-naming-rules '((noslash . <span style="color: #2A00FF;">"_"</span>)))
    (<span style="color: #7F0055; font-weight: bold;">setq</span> deft-text-mode 'org-mode)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> deft-use-filter-string-for-filename t)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> deft-org-mode-title-prefix t)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> deft-use-filename-as-title nil)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> deft-strip-summary-regexp
          (concat <span style="color: #2A00FF;">"</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">(</span><span style="color: #2A00FF;">"</span>
                  <span style="color: #2A00FF;">"[\n\t]"</span> <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">blank</span>
                  <span style="color: #2A00FF;">"</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">|</span><span style="color: #2A00FF;">^#\\+[[:upper:]_]+:.*$"</span> <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">org-mode metadata</span>
                  <span style="color: #2A00FF;">"</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">|</span><span style="color: #2A00FF;">^#\\+[[:alnum:]_]+:.*$"</span> <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">org-mode metadata</span>
                  <span style="color: #2A00FF;">"</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">)</span><span style="color: #2A00FF;">"</span>))

    <span style="color: #3F7F5F;">;;</span><span style="color: #3F7F5F;">advise deft-open-file to replace spaces in file names with _</span>
    (<span style="color: #7F0055; font-weight: bold;">require</span> '<span style="color: #110099;">kimim</span>)
    (<span style="color: #7F0055; font-weight: bold;">defun</span> <span style="color: #0000ff; font-weight: bold;">kimim/deft-open-file-advice</span> (orig-fun <span style="color: #000000; font-style: italic; text-decoration: underline;">&amp;rest</span> args)
      (<span style="color: #7F0055; font-weight: bold;">let</span> (name title)
        (<span style="color: #7F0055; font-weight: bold;">setq</span> name (<span style="color: #7F0055; font-weight: bold;">pop</span> args))
        (<span style="color: #7F0055; font-weight: bold;">if</span> (file-exists-p name)
            (<span style="color: #7F0055; font-weight: bold;">progn</span>
              (<span style="color: #7F0055; font-weight: bold;">push</span> name args)
              (apply orig-fun args))
          (<span style="color: #7F0055; font-weight: bold;">progn</span>
            (<span style="color: #7F0055; font-weight: bold;">setq</span> title (file-name-sans-extension
                         (file-name-nondirectory name)))
            (<span style="color: #7F0055; font-weight: bold;">setq</span> name (concat
                        (file-name-directory name)
                        (kimim/genfile-timestamp)
                        (downcase
                         (replace-regexp-in-string
                          <span style="color: #2A00FF;">" "</span> <span style="color: #2A00FF;">"_"</span> (file-name-nondirectory name)))
                        (<span style="color: #7F0055; font-weight: bold;">if</span> (not (file-name-extension name))
                            <span style="color: #2A00FF;">".txt"</span>)))
            (<span style="color: #7F0055; font-weight: bold;">push</span> name args)
            (apply orig-fun args)
            (insert (concat <span style="color: #2A00FF;">"#+TITLE: "</span> title <span style="color: #2A00FF;">"\n\n"</span>))))))

    (advice-add 'deft-open-file
                <span style="color: #7F0055; font-weight: bold;">:around</span> #'kimim/deft-open-file-advice)

    (<span style="color: #7F0055; font-weight: bold;">defun</span> <span style="color: #0000ff; font-weight: bold;">kimim/deft-new-file-named-advice</span> (orig-fun <span style="color: #000000; font-style: italic; text-decoration: underline;">&amp;rest</span> args)
      (<span style="color: #7F0055; font-weight: bold;">let</span> (name title)
        (<span style="color: #7F0055; font-weight: bold;">setq</span> name (<span style="color: #7F0055; font-weight: bold;">pop</span> args))
        (<span style="color: #7F0055; font-weight: bold;">setq</span> title name)
        (<span style="color: #7F0055; font-weight: bold;">setq</span> name (concat
                    (kimim/genfile-timestamp)
                    (downcase
                     (replace-regexp-in-string
                      <span style="color: #2A00FF;">" "</span> <span style="color: #2A00FF;">"_"</span> name))))
        (<span style="color: #7F0055; font-weight: bold;">push</span> name args)
        (apply orig-fun args)
        (insert (concat <span style="color: #2A00FF;">"#+TITLE: "</span> title <span style="color: #2A00FF;">"\n\n"</span>))))

    (advice-add 'deft-new-file-named
                <span style="color: #7F0055; font-weight: bold;">:around</span> #'kimim/deft-new-file-named-advice))
</pre>
</div>
</div>
</div>

<div id="outline-container-org3553923" class="outline-3">
<h3 id="org3553923"><span class="section-number-3">24.2</span> Org-roam</h3>
<div class="outline-text-3" id="text-24-2">
<p>
Org-roam implements <code>zettelkasten</code> method <sup><a id="fnr.17" class="footref" href="#fn.17">17</a></sup> used by famous German socialogist
Niklas Luhmann<sup><a id="fnr.18" class="footref" href="#fn.18">18</a></sup>.
</p>

<p>
First you should install <code>sqlite3</code>, which is used to index the links:
</p>

<div class="org-src-container">
<pre class="src src-shell">apt-cyg install sqlite3
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">org-roam</span>
  <span style="color: #7F0055; font-weight: bold;">:ensure</span> t
  <span style="color: #7F0055; font-weight: bold;">:custom</span>
  (org-roam-directory kimim/path-notes)
  (org-roam-file-extensions '(<span style="color: #2A00FF;">"txt"</span> <span style="color: #2A00FF;">"org"</span>))
  (org-roam-capture-templates
   (<span style="color: #7F0055; font-weight: bold;">quote</span>
    ((<span style="color: #2A00FF;">"d"</span> <span style="color: #2A00FF;">"default"</span> plain
      (<span style="color: #7F0055; font-weight: bold;">function</span> org-roam-capture--get-point)
      <span style="color: #2A00FF;">"%?"</span> <span style="color: #7F0055; font-weight: bold;">:file-name</span> <span style="color: #2A00FF;">"%&lt;%Y_%m%d&gt;_${slug}"</span>
      <span style="color: #7F0055; font-weight: bold;">:head</span> <span style="color: #2A00FF;">"#+TITLE: ${title}\n\n"</span> <span style="color: #7F0055; font-weight: bold;">:unnarrowed</span> t))))
  <span style="color: #7F0055; font-weight: bold;">:bind</span> (<span style="color: #7F0055; font-weight: bold;">:map</span> org-roam-mode-map
         ((<span style="color: #2A00FF;">"C-c n l"</span> . org-roam)
          (<span style="color: #2A00FF;">"C-c n f"</span> . org-roam-find-file)
          (<span style="color: #2A00FF;">"C-c n g"</span> . org-roam-graph))
         <span style="color: #7F0055; font-weight: bold;">:map</span> org-mode-map
         ((<span style="color: #2A00FF;">"C-c n i"</span> . org-roam-insert)
          (<span style="color: #2A00FF;">"C-c n I"</span> . org-roam-insert-immediate))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org90dbc8d" class="outline-3">
<h3 id="org90dbc8d"><span class="section-number-3">24.3</span> zetteldeft</h3>
<div class="outline-text-3" id="text-24-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">zetteldeft</span>
  <span style="color: #7F0055; font-weight: bold;">:after</span> deft
  <span style="color: #7F0055; font-weight: bold;">:config</span>
  (zetteldeft-set-classic-keybindings)
  (<span style="color: #7F0055; font-weight: bold;">setf</span> zetteldeft-id-regex <span style="color: #2A00FF;">"[0-9]\\{8\\}</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">(</span><span style="color: #2A00FF;">[A-Z]\\{2,\\}</span><span style="color: #7F0055;">\\</span><span style="color: #7F0055;">)</span><span style="color: #2A00FF;">"</span>))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org100a319" class="outline-2">
<h2 id="org100a319"><span class="section-number-2">25</span> Markdown mode</h2>
<div class="outline-text-2" id="text-25">
<p>
Markdown is widely used as plain text file format.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">markdown-mode</span>
    <span style="color: #7F0055; font-weight: bold;">:bind</span>(<span style="color: #7F0055; font-weight: bold;">:map</span> markdown-mode-map
               (<span style="color: #2A00FF;">"M-&lt;up&gt;"</span> . markdown-move-subtree-up)
               (<span style="color: #2A00FF;">"M-&lt;down&gt;"</span> . markdown-move-subtree-down)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org20d43d1" class="outline-2">
<h2 id="org20d43d1"><span class="section-number-2">26</span> Reference management</h2>
<div class="outline-text-2" id="text-26">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">org-ref</span>
    <span style="color: #7F0055; font-weight: bold;">:after</span> org
    <span style="color: #7F0055; font-weight: bold;">:demand</span> t
    <span style="color: #7F0055; font-weight: bold;">:config</span>
    (<span style="color: #7F0055; font-weight: bold;">setq</span> reftex-default-bibliography ())
    (add-to-list 'reftex-default-bibliography (concat kimim/path-ref <span style="color: #2A00FF;">"references.bib"</span>))
    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-ref-bibliography-notes (concat kimim/path-notes <span style="color: #2A00FF;">"org-ref-notes.txt"</span>)
          org-ref-pdf-directory kimim/path-ref)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-ref-default-bibliography ())
    (add-to-list 'org-ref-default-bibliography (concat kimim/path-ref <span style="color: #2A00FF;">"references.bib"</span>))
    (<span style="color: #7F0055; font-weight: bold;">setq</span> bibtex-completion-bibliography (concat kimim/path-ref <span style="color: #2A00FF;">"references.bib"</span>)
          bibtex-completion-library-path org-ref-pdf-directory
          bibtex-completion-notes-path org-ref-bibliography-notes)

    <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">open pdf with system pdf viewer</span>
    (<span style="color: #7F0055; font-weight: bold;">setq</span> bibtex-completion-pdf-open-function
          (<span style="color: #7F0055; font-weight: bold;">lambda</span> (fpath)
            (kimim/open-in-external-app fpath)))

    (<span style="color: #7F0055; font-weight: bold;">defun</span> <span style="color: #0000ff; font-weight: bold;">kimim/org-ref-get-pdf-filename</span> (key)
      <span style="color: #2A00FF;">"Return the pdf filename associated with a bibtex KEY.</span>
<span style="color: #2A00FF;">  This searches recursively for the pattern KEY*.pdf. If one result</span>
<span style="color: #2A00FF;">  is found it is returned, but if multiple results are found,</span>
<span style="color: #2A00FF;">  e.g. there are related files to the KEY you are prompted for</span>
<span style="color: #2A00FF;">  which one you want."</span>
      (<span style="color: #7F0055; font-weight: bold;">if</span> org-ref-pdf-directory
          (<span style="color: #7F0055; font-weight: bold;">let</span> ((pdfs
                 (-flatten
                  (<span style="color: #7F0055; font-weight: bold;">--map</span> (file-expand-wildcards
                          (f-join it (format <span style="color: #2A00FF;">"%s*.pdf"</span> key)))
                         (-flatten
                          (append (list org-ref-pdf-directory)
                                  (directory-files-recursively
                                   org-ref-pdf-directory <span style="color: #2A00FF;">""</span> t)))))))
            (<span style="color: #7F0055; font-weight: bold;">cond</span>
             ((= 0 (length pdfs))
              (expand-file-name (format <span style="color: #2A00FF;">"%s.pdf"</span> key) org-ref-pdf-directory))
             ((= 1 (length pdfs))
              (car pdfs))
             ((&gt; (length pdfs) 1)
              (completing-read <span style="color: #2A00FF;">"Choose: "</span> pdfs))))
        <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">No org-ref-pdf-directory defined so return just a file name.</span>
        (format <span style="color: #2A00FF;">"%s.pdf"</span> key)))

    (<span style="color: #7F0055; font-weight: bold;">setq</span> org-ref-get-pdf-filename-function 'kimim/org-ref-get-pdf-filename))
</pre>
</div>

<p>
There is a built-in <code>bibtex-mode</code> to manage references. We can extend it to
support more functions from <code>org-ref</code>:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">bibtex</span>
    <span style="color: #7F0055; font-weight: bold;">:after</span> org
    <span style="color: #7F0055; font-weight: bold;">:demand</span> t
    <span style="color: #7F0055; font-weight: bold;">:ensure</span> nil
    <span style="color: #7F0055; font-weight: bold;">:bind</span> (<span style="color: #7F0055; font-weight: bold;">:map</span> bibtex-mode-map
                (<span style="color: #2A00FF;">"C-x m p"</span> . org-ref-open-bibtex-pdf)
                (<span style="color: #2A00FF;">"C-c C-z"</span> . org-ref-open-bibtex-notes))
    <span style="color: #7F0055; font-weight: bold;">:config</span>
    (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">org-ref</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org71b91e5" class="outline-2">
<h2 id="org71b91e5"><span class="section-number-2">27</span> Dictionary</h2>
<div class="outline-text-2" id="text-27">
</div>
<div id="outline-container-org6488719" class="outline-3">
<h3 id="org6488719"><span class="section-number-3">27.1</span> Youdao dictionary</h3>
<div class="outline-text-3" id="text-27-1">
<p>
Search dictionary with Ctrl+F3 by youdao dictionary.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">youdao-dictionary</span>
    <span style="color: #7F0055; font-weight: bold;">:bind</span> (
           (<span style="color: #2A00FF;">"&lt;f12&gt;"</span> . youdao-dictionary-def-copied)
           (<span style="color: #2A00FF;">"C-&lt;f3&gt;"</span> . youdao-dictionary-search-at-point+)
           <span style="color: #7F0055; font-weight: bold;">:map</span> youdao-dictionary-mode-map
           (<span style="color: #2A00FF;">"&lt;mouse-3&gt;"</span> . youdao-dictionary-def-copied)
           (<span style="color: #2A00FF;">"f"</span> . youdao-dictionary-search-from-input))
    <span style="color: #7F0055; font-weight: bold;">:config</span>
    (<span style="color: #7F0055; font-weight: bold;">defun</span> <span style="color: #0000ff; font-weight: bold;">youdao-dictionary-def-copied</span> ()
      (<span style="color: #7F0055; font-weight: bold;">interactive</span>)
      (youdao-dictionary-search (gui-get-selection)))
    )
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org843d7d0" class="outline-2">
<h2 id="org843d7d0"><span class="section-number-2">28</span> Mail and Contacts</h2>
<div class="outline-text-2" id="text-28">
</div>
<div id="outline-container-orgf90c298" class="outline-3">
<h3 id="orgf90c298"><span class="section-number-3">28.1</span> EBDB - a replacement for BBDB, as contact management</h3>
<div class="outline-text-3" id="text-28-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">ebdb</span>
    <span style="color: #7F0055; font-weight: bold;">:commands</span> (ebdb ebdb-mail-aliases)
    <span style="color: #7F0055; font-weight: bold;">:config</span>
    (<span style="color: #7F0055; font-weight: bold;">setq</span> ebdb-sources (concat kimim/path-sync-emacs <span style="color: #2A00FF;">"ebdb"</span>))
    <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">do not pop *EBDB-Gnus* window</span>
    (<span style="color: #7F0055; font-weight: bold;">setq</span> ebdb-mua-pop-up nil)
    (<span style="color: #7F0055; font-weight: bold;">require</span> '<span style="color: #110099;">ebdb-gnus</span>)
    (<span style="color: #7F0055; font-weight: bold;">require</span> '<span style="color: #110099;">ebdb-message</span>)
    (<span style="color: #7F0055; font-weight: bold;">require</span> '<span style="color: #110099;">ebdb-org</span>)
    (add-hook 'message-setup-hook 'ebdb-mail-aliases))
</pre>
</div>
</div>
</div>

<div id="outline-container-org9143d49" class="outline-3">
<h3 id="org9143d49"><span class="section-number-3">28.2</span> erc</h3>
<div class="outline-text-3" id="text-28-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">erc settings</span>
  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">erc</span>
    <span style="color: #7F0055; font-weight: bold;">:commands</span> (erc)
    <span style="color: #7F0055; font-weight: bold;">:config</span>
    (<span style="color: #7F0055; font-weight: bold;">require</span> '<span style="color: #110099;">erc-join</span>)
    (erc-autojoin-mode 1)
    (erc-autojoin-enable)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> erc-default-server <span style="color: #2A00FF;">"irc.freenode.net"</span>)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> erc-autojoin-channels-alist
          '((<span style="color: #2A00FF;">"irc.freenode.net"</span> <span style="color: #2A00FF;">"#emacs"</span>)))
    (<span style="color: #7F0055; font-weight: bold;">setq</span> erc-hide-list '(<span style="color: #2A00FF;">"JOIN"</span> <span style="color: #2A00FF;">"PART"</span> <span style="color: #2A00FF;">"QUIT"</span>)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orged433ff" class="outline-3">
<h3 id="orged433ff"><span class="section-number-3">28.3</span> GNUS dired</h3>
<div class="outline-text-3" id="text-28-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">gnus-dired</span>
    <span style="color: #7F0055; font-weight: bold;">:ensure</span> nil
    <span style="color: #7F0055; font-weight: bold;">:commands</span> (turn-on-gnus-dired-mode)
    <span style="color: #7F0055; font-weight: bold;">:config</span>
    <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">make the `</span><span style="color: #110099;">gnus-dired-mail-buffers</span><span style="color: #3F7F5F;">' function also work on</span>
    <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">message-mode derived modes, such as mu4e-compose-mode</span>
    (<span style="color: #7F0055; font-weight: bold;">defun</span> <span style="color: #0000ff; font-weight: bold;">gnus-dired-mail-buffers</span> ()
      <span style="color: #2A00FF;">"Return a list of active message buffers."</span>
      (<span style="color: #7F0055; font-weight: bold;">let</span> (buffers)
        (<span style="color: #7F0055; font-weight: bold;">save-current-buffer</span>
          (<span style="color: #7F0055; font-weight: bold;">dolist</span> (buffer (buffer-list t))
            (set-buffer buffer)
            (<span style="color: #7F0055; font-weight: bold;">when</span> (<span style="color: #7F0055; font-weight: bold;">and</span> (derived-mode-p 'message-mode)
                       (null message-sent-message-via))
              (<span style="color: #7F0055; font-weight: bold;">push</span> (buffer-name buffer) buffers))))
        (nreverse buffers)))
    (<span style="color: #7F0055; font-weight: bold;">setq</span> gnus-dired-mail-mode 'mu4e-user-agent))
</pre>
</div>
</div>
</div>

<div id="outline-container-org8ceb467" class="outline-3">
<h3 id="org8ceb467"><span class="section-number-3">28.4</span> mu4e</h3>
<div class="outline-text-3" id="text-28-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">sendmail</span>
  <span style="color: #7F0055; font-weight: bold;">:ensure</span> nil
  <span style="color: #7F0055; font-weight: bold;">:custom</span> ((mail-user-agent 'sendmail-user-agent)
           (mail-signature nil)
           (mail-self-blind t)
           (mail-signature-file (concat kimim/path-sync-emacs <span style="color: #2A00FF;">"signature.txt"</span>))))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">mu-cite</span>
    <span style="color: #7F0055; font-weight: bold;">:commands</span> (mu-cite-original)
    <span style="color: #7F0055; font-weight: bold;">:config</span>
    (<span style="color: #7F0055; font-weight: bold;">setq</span> mu-cite-top-format '(<span style="color: #2A00FF;">"On "</span> date <span style="color: #2A00FF;">", "</span> from <span style="color: #2A00FF;">" wrote:\n\n"</span>))
    (<span style="color: #7F0055; font-weight: bold;">setq</span> mu-cite-prefix-format '(<span style="color: #2A00FF;">" &gt; "</span>)))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">mu4e</span>
  <span style="color: #7F0055; font-weight: bold;">:ensure</span> nil
  <span style="color: #7F0055; font-weight: bold;">:custom</span> ((mu4e-compose-reply-recipients 'sender)
           (mu4e-compose-signature-auto-include nil))
  <span style="color: #7F0055; font-weight: bold;">:commands</span> (mu4e mu4e-compose-new)
  <span style="color: #7F0055; font-weight: bold;">:bind</span> (
         <span style="color: #7F0055; font-weight: bold;">:map</span> mu4e-headers-mode-map
         (<span style="color: #2A00FF;">"r"</span> . kimim/mu4e-compose-reply-sender)
         (<span style="color: #2A00FF;">"R"</span> . kimim/mu4e-compose-reply-all)
         (<span style="color: #2A00FF;">"f"</span> . kimim/mu4e~view-quit-buffer)
         <span style="color: #7F0055; font-weight: bold;">:map</span> mu4e-compose-mode-map
         (<span style="color: #2A00FF;">"&lt;C-tab&gt;"</span> . message-tab)
         <span style="color: #7F0055; font-weight: bold;">:map</span> mu4e-view-mode-map
         (<span style="color: #2A00FF;">"&lt;home&gt;"</span> . move-beginning-of-line)
         (<span style="color: #2A00FF;">"&lt;end&gt;"</span> . move-end-of-line)
         (<span style="color: #2A00FF;">"r"</span> . kimim/mu4e-compose-reply-sender)
         (<span style="color: #2A00FF;">"R"</span> . kimim/mu4e-compose-reply-all))
  <span style="color: #7F0055; font-weight: bold;">:load-path</span> (<span style="color: #7F0055; font-weight: bold;">lambda</span> ()
               (<span style="color: #7F0055; font-weight: bold;">cond</span> ((eq system-type 'darwin)
                      <span style="color: #2A00FF;">"/usr/local/Cellar/mu/1.0_1/share/emacs/site-lisp/mu/mu4e"</span>)
                     ((eq system-type 'cygwin)
                      <span style="color: #2A00FF;">"/usr/local/share/emacs/site-lisp/mu4e"</span>)
                     ((eq system-type 'gnu/linux)
                      <span style="color: #2A00FF;">"/snap/maildir-utils/current/share/emacs/site-lisp/mu4e"</span>)))
  <span style="color: #7F0055; font-weight: bold;">:config</span>
  <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">turn html email to lighter color in dark theme</span>
  (<span style="color: #7F0055; font-weight: bold;">require</span> '<span style="color: #110099;">mu4e-contrib</span>)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> mu4e-html2text-command 'mu4e-shr2text)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> shr-color-visible-luminance-min 60)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> shr-color-visible-distance-min 5)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> shr-use-colors nil)
  (advice-add #'shr-colorize-region <span style="color: #7F0055; font-weight: bold;">:around</span> (<span style="color: #7F0055; font-weight: bold;">defun</span> <span style="color: #0000ff; font-weight: bold;">shr-no-colourise-region</span> (<span style="color: #000000; font-style: italic; text-decoration: underline;">&amp;rest</span> ignore)))

  (<span style="color: #7F0055; font-weight: bold;">require</span> '<span style="color: #110099;">org-mu4e</span>) <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">capture link</span>
  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">sendmail</span>)
  (add-to-list 'Info-additional-directory-list <span style="color: #2A00FF;">"/usr/local/share/info"</span>)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> mu4e-mu-binary <span style="color: #2A00FF;">"/usr/local/bin/mu"</span>)
  (<span style="color: #7F0055; font-weight: bold;">cond</span> ((eq system-type 'gnu/linux)
         (<span style="color: #7F0055; font-weight: bold;">setq</span> mu4e-mu-binary <span style="color: #2A00FF;">"/snap/bin/mu"</span>)))
  (<span style="color: #7F0055; font-weight: bold;">setq</span> mail-user-agent 'mu4e-user-agent)
  <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">Fetch mail by offlineimap</span>
  (<span style="color: #7F0055; font-weight: bold;">setq</span> mu4e-get-mail-command <span style="color: #2A00FF;">"offlineimap -c ~/.offlineimaprc -u quiet"</span>)
  <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">Fetch mail in 60 sec interval</span>
  (<span style="color: #7F0055; font-weight: bold;">setq</span> mu4e-update-interval 300)
  <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">hide indexing messages from minibuffer</span>
  (<span style="color: #7F0055; font-weight: bold;">setq</span> mu4e-hide-index-messages t)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> mu4e-use-fancy-chars nil)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> mu4e-view-show-images t)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> mu4e-view-fields
        '(<span style="color: #7F0055; font-weight: bold;">:subject</span> <span style="color: #7F0055; font-weight: bold;">:from</span> <span style="color: #7F0055; font-weight: bold;">:to</span> <span style="color: #7F0055; font-weight: bold;">:cc</span> <span style="color: #7F0055; font-weight: bold;">:date</span> <span style="color: #7F0055; font-weight: bold;">:mailing-list</span>
                   <span style="color: #7F0055; font-weight: bold;">:attachments</span> <span style="color: #7F0055; font-weight: bold;">:signature</span> <span style="color: #7F0055; font-weight: bold;">:decryption</span>))
  (<span style="color: #7F0055; font-weight: bold;">setq</span> mu4e-headers-fields
        '( (<span style="color: #7F0055; font-weight: bold;">:human-date</span>    .   12)
           (<span style="color: #7F0055; font-weight: bold;">:flags</span>         .    6)
           (<span style="color: #7F0055; font-weight: bold;">:from</span>          .   22)
           (<span style="color: #7F0055; font-weight: bold;">:subject</span>       .   nil)))
  (<span style="color: #7F0055; font-weight: bold;">setq</span> mu4e-compose-cite-function 'mu-cite-original)
  (add-hook 'mu4e-view-mode-hook 'visual-line-mode)
  (add-hook 'mu4e-compose-mode-hook 'kimim/mail-setup)
  (add-hook 'mu4e-compose-mode-hook 'orgalist-mode)
  (add-hook 'mu4e-compose-mode-hook (<span style="color: #7F0055; font-weight: bold;">lambda</span> ()
                                      (auto-fill-mode -1)))
  (<span style="color: #7F0055; font-weight: bold;">defun</span> <span style="color: #0000ff; font-weight: bold;">kimim/mu4e~view-quit-buffer</span> ()
    (<span style="color: #7F0055; font-weight: bold;">interactive</span>)
    (<span style="color: #7F0055; font-weight: bold;">when</span> (get-buffer <span style="color: #2A00FF;">"*mu4e-view*"</span>)
      (switch-to-buffer <span style="color: #2A00FF;">"*mu4e-view*"</span>)
      (mu4e~view-quit-buffer)))

  (<span style="color: #7F0055; font-weight: bold;">defun</span> <span style="color: #0000ff; font-weight: bold;">kimim/mu4e-compose-reply-sender</span> ()
    (<span style="color: #7F0055; font-weight: bold;">interactive</span>)
    (set (make-local-variable 'mu4e-compose-reply-recipients) 'sender)
    (mu4e-compose-reply))

  (<span style="color: #7F0055; font-weight: bold;">defun</span> <span style="color: #0000ff; font-weight: bold;">kimim/mu4e-compose-reply-all</span> ()
    (<span style="color: #7F0055; font-weight: bold;">interactive</span>)
    (set (make-local-variable 'mu4e-compose-reply-recipients) 'all)
    (mu4e-compose-reply)))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org8e84b42" class="outline-2">
<h2 id="org8e84b42"><span class="section-number-2">29</span> Viewing Documents</h2>
<div class="outline-text-2" id="text-29">
<p>
doc-view-mode can view many kind of documents, such as PDF, PS and images. You
should install postscript in cygwin.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">doc-view</span>
  <span style="color: #7F0055; font-weight: bold;">:custom</span> ((doc-view-continuous t)
           (doc-view-image-width 500)
           (doc-view-resolution 300)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org23b09c3" class="outline-2">
<h2 id="org23b09c3"><span class="section-number-2">30</span> Reading News</h2>
<div class="outline-text-2" id="text-30">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">elfeed</span>
  <span style="color: #7F0055; font-weight: bold;">:commands</span> (elfeed)
  <span style="color: #7F0055; font-weight: bold;">:bind</span> (<span style="color: #7F0055; font-weight: bold;">:map</span> elfeed-search-mode-map
              (<span style="color: #2A00FF;">"&lt;SPC&gt;"</span> . scroll-up-command)
              (<span style="color: #2A00FF;">"&lt;backspace&gt;"</span> . scroll-down-command)
         <span style="color: #7F0055; font-weight: bold;">:map</span> elfeed-show-mode-map
         (<span style="color: #2A00FF;">"M-q"</span> . article-fill-long-lines))
  <span style="color: #7F0055; font-weight: bold;">:config</span>
  <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">open feed link with eww</span>
  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">org</span>)
  (<span style="color: #7F0055; font-weight: bold;">require</span> '<span style="color: #110099;">gnus-art</span>)
  (<span style="color: #7F0055; font-weight: bold;">setq</span> browse-url-browser-function 'browse-url-default-browser)<span style="color: #3F7F5F;">;;</span><span style="color: #3F7F5F;">eww-browse-url)</span>
  (<span style="color: #7F0055; font-weight: bold;">setq</span> elfeed-curl-extra-arguments '(<span style="color: #2A00FF;">"--proxy"</span> <span style="color: #2A00FF;">"127.0.0.1:1080"</span>))
  (advice-add 'elfeed-show-entry <span style="color: #7F0055; font-weight: bold;">:after</span>
              (<span style="color: #7F0055; font-weight: bold;">lambda</span> (entry)
                (article-fill-long-lines)))

  (<span style="color: #7F0055; font-weight: bold;">setq</span> elfeed-feeds
        '(
          (<span style="color: #2A00FF;">"https://www.theguardian.com/world/china/rss"</span> CN)
          (<span style="color: #2A00FF;">"http://www.chinadaily.com.cn/rss/bizchina_rss.xml"</span> CN)
          (<span style="color: #2A00FF;">"https://www.lemonde.fr/rss/une.xml"</span> FR une)
          (<span style="color: #2A00FF;">"http://kimi.im/atom.xml"</span> blog))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf72e3c9" class="outline-2">
<h2 id="orgf72e3c9"><span class="section-number-2">31</span> kimim utils</h2>
<div class="outline-text-2" id="text-31">
<p>
In Windows environment, <code>kimim/xterm</code> and <code>kimim/dc</code> will look up the program
from system PATH, so you should set these to system PATH.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">use-package</span> <span style="color: #110099;">kimim</span>
    <span style="color: #7F0055; font-weight: bold;">:ensure</span> nil
    <span style="color: #7F0055; font-weight: bold;">:commands</span> (kimim/mail-setup)
    <span style="color: #7F0055; font-weight: bold;">:bind</span>
    ((<span style="color: #2A00FF;">"C-x m m"</span> . kimim/mail-new-empty)
     (<span style="color: #2A00FF;">"C-x m y"</span> . kimim/mail-attach-files)
     (<span style="color: #2A00FF;">"&lt;f9&gt;"</span> . kimim/xterm)
     (<span style="color: #2A00FF;">"S-&lt;f9&gt;"</span> . kimim/cmd)
     (<span style="color: #2A00FF;">"C-c r"</span> . kimim/rename-file-and-buffer)
     (<span style="color: #2A00FF;">"C-x m o"</span> . kimim/open-in-external-app)
     (<span style="color: #2A00FF;">"C-c d"</span> . kimim/lookinsight))
    <span style="color: #7F0055; font-weight: bold;">:load-path</span> <span style="color: #2A00FF;">"~/kimim-emacs/site-lisp/"</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-orga0c79e7" class="outline-2">
<h2 id="orga0c79e7"><span class="section-number-2">32</span> Key Binding</h2>
<div class="outline-text-2" id="text-32">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"&lt;f1&gt;"</span> 'delete-other-windows)
  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"C-&lt;f1&gt;"</span> 'nuke-other-buffers)
  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"M-&lt;f1&gt;"</span> (<span style="color: #7F0055; font-weight: bold;">lambda</span>()
                       (<span style="color: #7F0055; font-weight: bold;">interactive</span>)
                       (switch-to-buffer <span style="color: #2A00FF;">"*scratch*"</span>) (nuke-other-buffers)))
  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"&lt;f2&gt;"</span> 'other-window)
  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"&lt;f5&gt;"</span> (<span style="color: #7F0055; font-weight: bold;">lambda</span> ()
                     (<span style="color: #7F0055; font-weight: bold;">interactive</span>)
                     (switch-to-buffer <span style="color: #2A00FF;">"*scratch*"</span>) (delete-other-windows)))
  <span style="color: #3F7F5F;">;;</span><span style="color: #3F7F5F;">(bind-key "&lt;f7&gt;" 'kimim/toggle-highlight-tap)</span>
  <span style="color: #3F7F5F;">;;</span><span style="color: #3F7F5F;">(bind-key "&lt;f8&gt;" (lambda ()</span>
  <span style="color: #3F7F5F;">;;                   </span><span style="color: #3F7F5F;">(interactive) (list-charset-chars 'ascii)))</span>
  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"&lt;f7&gt;"</span> 'bury-buffer)
  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"&lt;f8&gt;"</span> 'unbury-buffer)
  <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">(bind-key "M-&lt;SPC&gt;" (lambda () (interactive)</span>
  <span style="color: #3F7F5F;">;;                       </span><span style="color: #3F7F5F;">(insert ?_)))</span>
  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"C-h"</span> 'delete-backward-char)
  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"M-h"</span> 'backward-kill-word)
  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"M-?"</span> 'mark-paragraph)
  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"C-x k"</span> 'kill-this-buffer)
  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"C-x C-v"</span> 'view-file-other-window)
  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"C-c C-o"</span> 'occur)
  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"C-z"</span> 'set-mark-command)
  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"M-o"</span> 'other-window)
  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"M-n"</span> 'next-error)
  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"M-p"</span> 'previous-error)
  <span style="color: #3F7F5F;">;;</span><span style="color: #3F7F5F;">(define-key hs-minor-mode-map "\C-c/" 'hs-toggle-hiding)</span>
  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"M-*"</span> 'pop-tag-mark)

  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"C-c C-/"</span> 'comment-or-uncomment-region)
  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"RET"</span> 'newline-and-indent)
  <span style="color: #3F7F5F;">;;</span><span style="color: #3F7F5F;">(define-key global-map (kbd "&lt;M-S-mouse-1&gt;") 'pop-tag-mark)</span>
  <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">key bindings</span>
  (<span style="color: #7F0055; font-weight: bold;">when</span> (eq system-type 'darwin) <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">mac specific settings</span>
    (<span style="color: #7F0055; font-weight: bold;">setq</span> mac-option-modifier 'super)
    (<span style="color: #7F0055; font-weight: bold;">setq</span> mac-command-modifier 'meta)
    <span style="color: #3F7F5F;">;; </span><span style="color: #3F7F5F;">sets fn-delete to be right-delete</span>
    (global-set-key [kp-delete] 'delete-char))

  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"C-x m h"</span> 'help)
  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"C-x m c"</span> 'calculator)
  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"C-x m n"</span> 'compose-mail)
  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"C-x m s"</span> '(lambda ()
                         (<span style="color: #7F0055; font-weight: bold;">interactive</span>)
                         (set-frame-font
                          (concat <span style="color: #2A00FF;">"Inconsolata-"</span> (read-string <span style="color: #2A00FF;">"Enter font size: "</span>)) t)))
  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"C-x m ."</span> 'unbury-buffer)
  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"C-x m ,"</span> 'bury-buffer)
  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"C-x m  &#12290;"</span> 'unbury-buffer)
  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"C-x m  &#65292;"</span> 'bury-buffer)
  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"C-x ,"</span> 'bury-buffer)
  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"C-x ."</span> 'unbury-buffer)
  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"C-x  &#65292;"</span> 'bury-buffer)
  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"C-x  &#12290;"</span> 'unbury-buffer)
  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"C-x  &#8216;"</span> 'hippie-expand)
  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"C-x  &#8217;"</span> 'hippie-expand)
  (<span style="color: #7F0055; font-weight: bold;">bind-key</span> <span style="color: #2A00FF;">"C-x M-s"</span> 'eshell)
</pre>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
<a href="http://www.literateprogramming.com/">http://www.literateprogramming.com/</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara">
<a href="http://cygwin.com/">http://cygwin.com/</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3">3</a></sup> <div class="footpara"><p class="footpara">
<a href="https://github.com/transcode-open/apt-cyg">https://github.com/transcode-open/apt-cyg</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.4" class="footnum" href="#fnr.4">4</a></sup> <div class="footpara"><p class="footpara">
<a href="http://brew.sh/">http://brew.sh/</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.5" class="footnum" href="#fnr.5">5</a></sup> <div class="footpara"><p class="footpara">
<a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Packages.html">https://www.gnu.org/software/emacs/manual/html_node/emacs/Packages.html</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.6" class="footnum" href="#fnr.6">6</a></sup> <div class="footpara"><p class="footpara">
<a href="https://github.com/tldr-pages/tldr">https://github.com/tldr-pages/tldr</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.7" class="footnum" href="#fnr.7">7</a></sup> <div class="footpara"><p class="footpara">
<a href="https://github.com/kuanyui/tldr.el">https://github.com/kuanyui/tldr.el</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.8" class="footnum" href="#fnr.8">8</a></sup> <div class="footpara"><p class="footpara">
<a href="https://github.com/ggreer/the_silver_searcher#installation">https://github.com/ggreer/the_silver_searcher#installation</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.9" class="footnum" href="#fnr.9">9</a></sup> <div class="footpara"><p class="footpara">
<a href="https://github.com/Wilfred/ag.el">https://github.com/Wilfred/ag.el</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.10" class="footnum" href="#fnr.10">10</a></sup> <div class="footpara"><p class="footpara">
<a href="https://github.com/syl20bnr/spacemacs/issues/381">https://github.com/syl20bnr/spacemacs/issues/381</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.11" class="footnum" href="#fnr.11">11</a></sup> <div class="footpara"><p class="footpara">
<a href="https://clojure.org/">https://clojure.org/</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.12" class="footnum" href="#fnr.12">12</a></sup> <div class="footpara"><p class="footpara">
<a href="https://cider.mx/">https://cider.mx/</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.13" class="footnum" href="#fnr.13">13</a></sup> <div class="footpara"><p class="footpara">
<a href="https://github.com/jorgenschaefer/elpy">https://github.com/jorgenschaefer/elpy</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.14" class="footnum" href="#fnr.14">14</a></sup> <div class="footpara"><p class="footpara">
<a href="https://github.com/ralesi/ahk-mode">https://github.com/ralesi/ahk-mode</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.15" class="footnum" href="#fnr.15">15</a></sup> <div class="footpara"><p class="footpara">
<a href="https://polymode.github.io/">https://polymode.github.io/</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.16" class="footnum" href="#fnr.16">16</a></sup> <div class="footpara"><p class="footpara">
<a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/File-Name-Components.html">https://www.gnu.org/software/emacs/manual/html_node/elisp/File-Name-Components.html</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.17" class="footnum" href="#fnr.17">17</a></sup> <div class="footpara"><p class="footpara">
<a href="https://zettelkasten.de/">https://zettelkasten.de/</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.18" class="footnum" href="#fnr.18">18</a></sup> <div class="footpara"><p class="footpara">
<a href="https://en.wikipedia.org/wiki/Niklas_Luhmann">https://en.wikipedia.org/wiki/Niklas_Luhmann</a>
</p></div></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="date">Created: 2020-11-22 Sun 09:47</p>
</div>
</body>
</html>
